import{a as Ye,b as Ae,e as Se,r as Ee,f as we,h as P,i as V,j as ue,k as j,l as x,w as R,o as Z,u as N,m as H,c as ne,p as G,q as ee,s as Ie,t as Ce,v as xe}from"./entry.a9443848.js";const Ne=Ye({iCalDefaultUrl:"https://www.sigweb.org/index.php?option=com_jevents&task=icals.export&format=ical&catids=0&years=0&k=38f31bbc7bff3bce9137ac0e5a56adc2",defaultAuthor:"Daniel Ro√üner",defaultPosition:"SIGWEB Webmaster",defaultDoi:"10.1145/3583849.3583854"}),Be={},ze=Ae(Ne,Be);function te(){const d=Se();return d._appConfig||(d._appConfig=Ee(ze)),d._appConfig}function Pe(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var fe={exports:{}};(function(d){var n;n=d.exports,n.foldLength=75,n.newLineChar=`\r
`,n.helpers={updateTimezones:function(o){var e,t,r,i,h,a;if(!o||o.name!=="vcalendar")return o;for(e=o.getAllSubcomponents(),t=[],r={},h=0;h<e.length;h++)e[h].name==="vtimezone"?r[a=e[h].getFirstProperty("tzid").getFirstValue()]=e[h]:t=t.concat(e[h].getAllProperties());for(i={},h=0;h<t.length;h++)(a=t[h].getParameter("tzid"))&&(i[a]=!0);for(h in r)r.hasOwnProperty(h)&&!i[h]&&o.removeSubcomponent(r[h]);for(h in i)i.hasOwnProperty(h)&&!r[h]&&n.TimezoneService.has(h)&&o.addSubcomponent(n.TimezoneService.get(h).component);return o},isStrictlyNaN:function(o){return typeof o=="number"&&isNaN(o)},strictParseInt:function(o){var e=parseInt(o,10);if(n.helpers.isStrictlyNaN(e))throw new Error('Could not extract integer from "'+o+'"');return e},formatClassType:function(o,e){if(o!==void 0)return o instanceof e?o:new e(o)},unescapedIndexOf:function(o,e,t){for(;(t=o.indexOf(e,t))!==-1;){if(!(0<t&&o[t-1]==="\\"))return t;t+=1}return-1},binsearchInsert:function(o,e,t){if(!o.length)return 0;for(var r,i,h=0,a=o.length-1;h<=a;)if((i=t(e,o[r=h+Math.floor((a-h)/2)]))<0)a=r-1;else{if(!(0<i))break;h=r+1}return!(i<0)&&0<i?r+1:r},dumpn:function(){n.debug&&(typeof console<"u"&&"log"in console?n.helpers.dumpn=function(o){console.log(o)}:n.helpers.dumpn=function(o){dump(o+`
`)},n.helpers.dumpn(arguments[0]))},clone:function(o,e){if(o&&typeof o=="object"){if(o instanceof Date)return new Date(o.getTime());if("clone"in o)return o.clone();if(Array.isArray(o)){for(var t=[],r=0;r<o.length;r++)t.push(e?n.helpers.clone(o[r],!0):o[r]);return t}var i,h={};for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(h[i]=e?n.helpers.clone(o[i],!0):o[i]);return h}return o},foldline:function(o){for(var e="",t=o||"",r=0,i=0;t.length;){var h=t.codePointAt(r);h<128?++i:i+=h<2048?2:h<65536?3:4,i<n.foldLength+1?r+=65535<h?2:1:(e+=n.newLineChar+" "+t.substring(0,r),t=t.substring(r),r=i=0)}return e.substr(n.newLineChar.length+1)},pad2:function(o){switch(typeof o!="string"&&(typeof o=="number"&&(o=parseInt(o)),o=String(o)),o.length){case 0:return"00";case 1:return"0"+o;default:return o}},trunc:function(o){return o<0?Math.ceil(o):Math.floor(o)},inherits:function(o,e,t){function r(){}r.prototype=o.prototype,e.prototype=new r,t&&n.helpers.extend(t,e.prototype)},extend:function(o,e){for(var t in o){var r=Object.getOwnPropertyDescriptor(o,t);r&&!Object.getOwnPropertyDescriptor(e,t)&&Object.defineProperty(e,t,r)}return e}},n.design=function(){var o=/\\\\|\\,|\\[Nn]/g,e=/\\|,|\n/g;function t(u,y){return{matches:/.*/,fromICAL:function(g,A){return function(S,Y,E){return S.indexOf("\\")===-1?S:(E&&(Y=new RegExp(Y.source+"|\\\\"+E)),S.replace(Y,l))}(g,u,A)},toICAL:function(g,A){var S=y;return A&&(S=new RegExp(y.source+"|"+A)),g.replace(S,function(Y){switch(Y){case"\\":return"\\\\";case";":return"\\;";case",":return"\\,";case`
`:return"\\n";default:return Y}})}}}var v={defaultType:"text"},r={defaultType:"text",multiValue:","},i={defaultType:"text",structuredValue:";"},h={defaultType:"integer"},a={defaultType:"date-time",allowedTypes:["date-time","date"]},c={defaultType:"date-time"},b={defaultType:"uri"},D={defaultType:"utc-offset"},f={defaultType:"recur"},s={defaultType:"date-and-or-time",allowedTypes:["date-time","date","text"]};function l(u){switch(u){case"\\\\":return"\\";case"\\;":return";";case"\\,":return",";case"\\n":case"\\N":return`
`;default:return u}}var p={categories:r,url:b,version:v,uid:v},_={boolean:{values:["TRUE","FALSE"],fromICAL:function(u){return u==="TRUE"},toICAL:function(u){return u?"TRUE":"FALSE"}},float:{matches:/^[+-]?\d+\.\d+$/,fromICAL:function(u){return u=parseFloat(u),n.helpers.isStrictlyNaN(u)?0:u},toICAL:function(u){return String(u)}},integer:{fromICAL:function(u){return u=parseInt(u),n.helpers.isStrictlyNaN(u)?0:u},toICAL:function(u){return String(u)}},"utc-offset":{toICAL:function(u){return u.length<7?u.substr(0,3)+u.substr(4,2):u.substr(0,3)+u.substr(4,2)+u.substr(7,2)},fromICAL:function(u){return u.length<6?u.substr(0,3)+":"+u.substr(3,2):u.substr(0,3)+":"+u.substr(3,2)+":"+u.substr(5,2)},decorate:function(u){return n.UtcOffset.fromString(u)},undecorate:function(u){return u.toString()}}},m=n.helpers.extend(_,{text:t(/\\\\|\\;|\\,|\\[Nn]/g,/\\|;|,|\n/g),uri:{},binary:{decorate:function(u){return n.Binary.fromString(u)},undecorate:function(u){return u.toString()}},"cal-address":{},date:{decorate:function(u,y){return O.strict?n.Time.fromDateString(u,y):n.Time.fromString(u,y)},undecorate:function(u){return u.toString()},fromICAL:function(u){return!O.strict&&15<=u.length?m["date-time"].fromICAL(u):u.substr(0,4)+"-"+u.substr(4,2)+"-"+u.substr(6,2)},toICAL:function(u){var y=u.length;return y==10?u.substr(0,4)+u.substr(5,2)+u.substr(8,2):19<=y?m["date-time"].toICAL(u):u}},"date-time":{fromICAL:function(u){if(O.strict||u.length!=8){var y=u.substr(0,4)+"-"+u.substr(4,2)+"-"+u.substr(6,2)+"T"+u.substr(9,2)+":"+u.substr(11,2)+":"+u.substr(13,2);return u[15]&&u[15]==="Z"&&(y+="Z"),y}return m.date.fromICAL(u)},toICAL:function(u){var y=u.length;return y!=10||O.strict?19<=y?(y=u.substr(0,4)+u.substr(5,2)+u.substr(8,5)+u.substr(14,2)+u.substr(17,2),u[19]&&u[19]==="Z"&&(y+="Z"),y):u:m.date.toICAL(u)},decorate:function(u,y){return O.strict?n.Time.fromDateTimeString(u,y):n.Time.fromString(u,y)},undecorate:function(u){return u.toString()}},duration:{decorate:function(u){return n.Duration.fromString(u)},undecorate:function(u){return u.toString()}},period:{fromICAL:function(u){return u=u.split("/"),u[0]=m["date-time"].fromICAL(u[0]),n.Duration.isValueString(u[1])||(u[1]=m["date-time"].fromICAL(u[1])),u},toICAL:function(u){return O.strict||u[0].length!=10?u[0]=m["date-time"].toICAL(u[0]):u[0]=m.date.toICAL(u[0]),n.Duration.isValueString(u[1])||(O.strict||u[1].length!=10?u[1]=m["date-time"].toICAL(u[1]):u[1]=m.date.toICAL(u[1])),u.join("/")},decorate:function(u,y){return n.Period.fromJSON(u,y,!O.strict)},undecorate:function(u){return u.toJSON()}},recur:{fromICAL:function(u){return n.Recur._stringToData(u,!0)},toICAL:function(u){var y,g,A="";for(y in u)Object.prototype.hasOwnProperty.call(u,y)&&(g=u[y],y=="until"?g=(10<g.length?m["date-time"]:m.date).toICAL(g):y=="wkst"?typeof g=="number"&&(g=n.Recur.numericDayToIcalDay(g)):Array.isArray(g)&&(g=g.join(",")),A+=y.toUpperCase()+"="+g+";");return A.substr(0,A.length-1)},decorate:function(u){return n.Recur.fromData(u)},undecorate:function(u){return u.toJSON()}},time:{fromICAL:function(u){if(u.length<6)return u;var y=u.substr(0,2)+":"+u.substr(2,2)+":"+u.substr(4,2);return u[6]==="Z"&&(y+="Z"),y},toICAL:function(u){if(u.length<8)return u;var y=u.substr(0,2)+u.substr(3,2)+u.substr(6,2);return u[8]==="Z"&&(y+="Z"),y}}}),D=n.helpers.extend(p,{action:v,attach:{defaultType:"uri"},attendee:{defaultType:"cal-address"},calscale:v,class:v,comment:v,completed:c,contact:v,created:c,description:v,dtend:a,dtstamp:c,dtstart:a,due:a,duration:{defaultType:"duration"},exdate:{defaultType:"date-time",allowedTypes:["date-time","date"],multiValue:","},exrule:f,freebusy:{defaultType:"period",multiValue:","},geo:{defaultType:"float",structuredValue:";"},"last-modified":c,location:v,method:v,organizer:{defaultType:"cal-address"},"percent-complete":h,priority:h,prodid:v,"related-to":v,repeat:h,rdate:{defaultType:"date-time",allowedTypes:["date-time","date","period"],multiValue:",",detectType:function(u){return u.indexOf("/")!==-1?"period":u.indexOf("T")===-1?"date":"date-time"}},"recurrence-id":a,resources:r,"request-status":i,rrule:f,sequence:h,status:v,summary:v,transp:v,trigger:{defaultType:"duration",allowedTypes:["duration","date-time"]},tzoffsetfrom:D,tzoffsetto:D,tzurl:b,tzid:v,tzname:v}),T=n.helpers.extend(_,{text:t(o,e),uri:t(o,e),date:{decorate:function(u){return n.VCardTime.fromDateAndOrTimeString(u,"date")},undecorate:function(u){return u.toString()},fromICAL:function(u){return u.length==8?m.date.fromICAL(u):u[0]=="-"&&u.length==6?u.substr(0,4)+"-"+u.substr(4):u},toICAL:function(u){return u.length==10?m.date.toICAL(u):u[0]=="-"&&u.length==7?u.substr(0,4)+u.substr(5):u}},time:{decorate:function(u){return n.VCardTime.fromDateAndOrTimeString("T"+u,"time")},undecorate:function(u){return u.toString()},fromICAL:function(y){var g=T.time._splitZone(y,!0),y=g[0],g=g[1];return g.length==6?g=g.substr(0,2)+":"+g.substr(2,2)+":"+g.substr(4,2):g.length==4&&g[0]!="-"?g=g.substr(0,2)+":"+g.substr(2,2):g.length==5&&(g=g.substr(0,3)+":"+g.substr(3,2)),g+(y=y.length==5&&(y[0]=="-"||y[0]=="+")?y.substr(0,3)+":"+y.substr(3):y)},toICAL:function(y){var g=T.time._splitZone(y),y=g[0],g=g[1];return g.length==8?g=g.substr(0,2)+g.substr(3,2)+g.substr(6,2):g.length==5&&g[0]!="-"?g=g.substr(0,2)+g.substr(3,2):g.length==6&&(g=g.substr(0,3)+g.substr(4,2)),g+(y=y.length==6&&(y[0]=="-"||y[0]=="+")?y.substr(0,3)+y.substr(4):y)},_splitZone:function(E,Y){var g,A=E.length-1,S=E.length-(Y?5:6),Y=E[S],E=E[A]=="Z"?(g=E[A],E.substr(0,A)):6<E.length&&(Y=="-"||Y=="+")?(g=E.substr(S),E.substr(0,S)):(g="",E);return[g,E]}},"date-time":{decorate:function(u){return n.VCardTime.fromDateAndOrTimeString(u,"date-time")},undecorate:function(u){return u.toString()},fromICAL:function(u){return T["date-and-or-time"].fromICAL(u)},toICAL:function(u){return T["date-and-or-time"].toICAL(u)}},"date-and-or-time":{decorate:function(u){return n.VCardTime.fromDateAndOrTimeString(u,"date-and-or-time")},undecorate:function(u){return u.toString()},fromICAL:function(u){return u=u.split("T"),(u[0]?T.date.fromICAL(u[0]):"")+(u[1]?"T"+T.time.fromICAL(u[1]):"")},toICAL:function(u){return u=u.split("T"),T.date.toICAL(u[0])+(u[1]?"T"+T.time.toICAL(u[1]):"")}},timestamp:m["date-time"],"language-tag":{matches:/^[a-zA-Z0-9-]+$/}}),b=n.helpers.extend(p,{adr:{defaultType:"text",structuredValue:";",multiValue:","},anniversary:s,bday:s,caladruri:b,caluri:b,clientpidmap:i,email:v,fburl:b,fn:v,gender:i,geo:b,impp:b,key:b,kind:v,lang:{defaultType:"language-tag"},logo:b,member:b,n:{defaultType:"text",structuredValue:";",multiValue:","},nickname:r,note:v,org:{defaultType:"text",structuredValue:";"},photo:b,related:b,rev:{defaultType:"timestamp"},role:v,sound:b,source:b,tel:{defaultType:"uri",allowedTypes:["uri","text"]},title:v,tz:{defaultType:"text",allowedTypes:["text","utc-offset","uri"]},xml:v}),_=n.helpers.extend(_,{binary:m.binary,date:T.date,"date-time":T["date-time"],"phone-number":{},uri:m.uri,text:m.text,time:m.time,vcard:m.text,"utc-offset":{toICAL:function(u){return u.substr(0,7)},fromICAL:function(u){return u.substr(0,7)},decorate:function(u){return n.UtcOffset.fromString(u)},undecorate:function(u){return u.toString()}}}),v=n.helpers.extend(p,{fn:v,n:{defaultType:"text",structuredValue:";",multiValue:","},nickname:r,photo:{defaultType:"binary",allowedTypes:["binary","uri"]},bday:{defaultType:"date-time",allowedTypes:["date-time","date"],detectType:function(u){return u.indexOf("T")===-1?"date":"date-time"}},adr:{defaultType:"text",structuredValue:";",multiValue:","},label:v,tel:{defaultType:"phone-number"},email:v,mailer:v,tz:{defaultType:"utc-offset",allowedTypes:["utc-offset","text"]},geo:{defaultType:"float",structuredValue:";"},title:v,role:v,logo:{defaultType:"binary",allowedTypes:["binary","uri"]},agent:{defaultType:"vcard",allowedTypes:["vcard","text","uri"]},org:i,note:r,prodid:v,rev:{defaultType:"date-time",allowedTypes:["date-time","date"],detectType:function(u){return u.indexOf("T")===-1?"date":"date-time"}},"sort-string":v,sound:{defaultType:"binary",allowedTypes:["binary","uri"]},class:v,key:{defaultType:"binary",allowedTypes:["binary","text"]}}),D={value:m,param:{cutype:{values:["INDIVIDUAL","GROUP","RESOURCE","ROOM","UNKNOWN"],allowXName:!0,allowIanaToken:!0},"delegated-from":{valueType:"cal-address",multiValue:",",multiValueSeparateDQuote:!0},"delegated-to":{valueType:"cal-address",multiValue:",",multiValueSeparateDQuote:!0},encoding:{values:["8BIT","BASE64"]},fbtype:{values:["FREE","BUSY","BUSY-UNAVAILABLE","BUSY-TENTATIVE"],allowXName:!0,allowIanaToken:!0},member:{valueType:"cal-address",multiValue:",",multiValueSeparateDQuote:!0},partstat:{values:["NEEDS-ACTION","ACCEPTED","DECLINED","TENTATIVE","DELEGATED","COMPLETED","IN-PROCESS"],allowXName:!0,allowIanaToken:!0},range:{values:["THISANDFUTURE"]},related:{values:["START","END"]},reltype:{values:["PARENT","CHILD","SIBLING"],allowXName:!0,allowIanaToken:!0},role:{values:["REQ-PARTICIPANT","CHAIR","OPT-PARTICIPANT","NON-PARTICIPANT"],allowXName:!0,allowIanaToken:!0},rsvp:{values:["TRUE","FALSE"]},"sent-by":{valueType:"cal-address"},tzid:{matches:/^\//},value:{values:["binary","boolean","cal-address","date","date-time","duration","float","integer","period","recur","text","time","uri","utc-offset"],allowXName:!0,allowIanaToken:!0}},property:D},b={value:T,param:{type:{valueType:"text",multiValue:","},value:{values:["text","uri","date","time","date-time","date-and-or-time","timestamp","boolean","integer","float","utc-offset","language-tag"],allowXName:!0,allowIanaToken:!0}},property:b},v={value:_,param:{type:{valueType:"text",multiValue:","},value:{values:["text","uri","date","date-time","phone-number","time","boolean","integer","float","utc-offset","vcard","binary"],allowXName:!0,allowIanaToken:!0}},property:v},O={strict:!0,defaultSet:D,defaultType:"unknown",components:{vcard:b,vcard3:v,vevent:D,vtodo:D,vjournal:D,valarm:D,vtimezone:D,daylight:D,standard:D},icalendar:D,vcard:b,vcard3:v,getDesignSet:function(u){return u&&u in O.components?O.components[u]:O.defaultSet}};return O}(),n.stringify=function(){var o=`\r
`,e="unknown",t=n.design,r=n.helpers;function i(a){for(var c=0,f=(a=typeof a[0]=="string"?[a]:a).length,s="";c<f;c++)s+=i.component(a[c])+o;return s}i.component=function(a,c){var f=a[0].toUpperCase(),s="BEGIN:"+f+o,l=a[1],p=0,m=l.length,T=a[0];for(T==="vcard"&&0<a[1].length&&(a[1][0][0]!=="version"||a[1][0][3]!=="4.0")&&(T="vcard3"),c=c||t.getDesignSet(T);p<m;p++)s+=i.property(l[p],c)+o;for(var _=a[2]||[],D=0,b=_.length;D<b;D++)s+=i.component(_[D],c)+o;return s+="END:"+f},i.property=function(a,c,f){var s,v=a[0].toUpperCase(),l=a[0],p=a[1],m=v;for(s in p){var T=p[s];p.hasOwnProperty(s)&&(T=(D=s in c.param&&c.param[s].multiValue)&&Array.isArray(T)?(c.param[s].multiValueSeparateDQuote&&(D='"'+D+'"'),T=T.map(i._rfc6868Unescape),i.multiValue(T,D,"unknown",null,c)):i._rfc6868Unescape(T),m+=";"+s.toUpperCase(),m+="="+i.propertyValue(T))}if(a.length===3)return m+":";var _=a[2],D=!1,b=!1,v=!1;return l in(c=c||t.defaultSet).property?("multiValue"in(l=c.property[l])&&(D=l.multiValue),"structuredValue"in l&&Array.isArray(a[3])&&(b=l.structuredValue),"defaultType"in l?_===l.defaultType&&(v=!0):_===e&&(v=!0)):_===e&&(v=!0),v||(m+=";VALUE="+_.toUpperCase()),m+=":",m+=D&&b?i.multiValue(a[3],b,_,D,c,b):D?i.multiValue(a.slice(3),D,_,null,c,!1):b?i.multiValue(a[3],b,_,null,c,b):i.value(a[3],_,c,!1),f?m:n.helpers.foldline(m)},i.propertyValue=function(a){return r.unescapedIndexOf(a,",")===-1&&r.unescapedIndexOf(a,":")===-1&&r.unescapedIndexOf(a,";")===-1?a:'"'+a+'"'},i.multiValue=function(a,c,f,s,l,p){for(var m="",T=a.length,_=0;_<T;_++)s&&Array.isArray(a[_])?m+=i.multiValue(a[_],s,f,null,l,p):m+=i.value(a[_],f,l,p),_!==T-1&&(m+=c);return m},i.value=function(a,c,f,s){return c in f.value&&"toICAL"in f.value[c]?f.value[c].toICAL(a,s):a},i._rfc6868Unescape=function(a){return a.replace(/[\n^"]/g,function(c){return h[c]})};var h={'"':"^'","\n":"^n","^":"^^"};return i}(),n.parse=function(){var o=/[^ \t]/,e=n.design,t=n.helpers;function r(a){this.message=a,this.name="ParserError";try{throw new Error}catch(c){c.stack&&((a=c.stack.split(`
`)).shift(),this.stack=a.join(`
`))}}function i(a){var c={},f=c.component=[];if(c.stack=[f],i._eachLine(a,function(s,l){i._handleContentLine(l,c)}),1<c.stack.length)throw new r("invalid ical body. component began but did not end");return c=null,f.length==1?f[0]:f}r.prototype=Error.prototype,i.property=function(a,c){return c={component:[[],[]],designSet:c||e.defaultSet},i._handleContentLine(a,c),c.component[1][0]},i.component=function(a){return i(a)},i.ParserError=r,i._handleContentLine=function(a,c){var f,s,l,D=a.indexOf(":"),p=a.indexOf(";"),m={};if((p=p!==-1&&D!==-1&&D<p?-1:p)!==-1){if(f=a.substring(0,p).toLowerCase(),(s=i._parseParameters(a.substring(p),0,c.designSet))[2]==-1)throw new r("Invalid parameters in '"+a+"'");if(m=s[0],p=s[1].length+s[2]+p,(s=a.substring(p).indexOf(":"))===-1)throw new r("Missing parameter value in '"+a+"'");s=a.substring(p+s+1)}else{if(D===-1)throw new r('invalid line (no token ";" or ":") "'+a+'"');if(f=a.substring(0,D).toLowerCase(),s=a.substring(D+1),f==="begin"){var b=[s.toLowerCase(),[],[]];return(c.stack.length===1?c.component:c.component[2]).push(b),c.stack.push(c.component),c.component=b,void(c.designSet||(c.designSet=e.getDesignSet(c.component[0])))}if(f==="end")return void(c.component=c.stack.pop())}var T,_,D=!1,b=!1;f in c.designSet.property&&("multiValue"in(T=c.designSet.property[f])&&(D=T.multiValue),"structuredValue"in T&&(b=T.structuredValue),s&&"detectType"in T&&(l=T.detectType(s))),l=l||("value"in m?m.value.toLowerCase():T?T.defaultType:"unknown"),delete m.value,D&&b?_=[f,m,l,s=i._parseMultiValue(s,b,l,[],D,c.designSet,b)]:D?i._parseMultiValue(s,D,l,_=[f,m,l],null,c.designSet,!1):_=b?[f,m,l,s=i._parseMultiValue(s,b,l,[],null,c.designSet,b)]:[f,m,l,s=i._parseValue(s,l,c.designSet,!1)],c.component[0]!=="vcard"||c.component[1].length!==0||f==="version"&&s==="4.0"||(c.designSet=e.getDesignSet("vcard3")),c.component[1].push(_)},i._parseValue=function(a,c,f,s){return c in f.value&&"fromICAL"in f.value[c]?f.value[c].fromICAL(a,s):a},i._parseParameters=function(a,c,f){for(var s,l,p=c,m=0,T={},_=-1;m!==!1&&(m=t.unescapedIndexOf(a,"=",m+1))!==-1;){if((u=a.substr(p+1,m-p-1)).length==0)throw new r("Empty parameter name in '"+a+"'");var D=l=!1,b=(s=u.toLowerCase())in f.param&&f.param[s].valueType?f.param[s].valueType:"text";if(s in f.param&&(D=f.param[s].multiValue,f.param[s].multiValueSeparateDQuote&&(l=i._rfc6868Escape('"'+D+'"'))),a[m+1]==='"'){if(m=t.unescapedIndexOf(a,'"',_=m+2),D&&m!=-1)for(var v=!0;v;)a[m+1]==D&&a[m+2]=='"'?m=t.unescapedIndexOf(a,'"',m+3):v=!1;if(m===-1)throw new r('invalid line (no matching double quote) "'+a+'"');y=a.substr(_,m-_),(p=t.unescapedIndexOf(a,";",m))===-1&&(m=!1)}else var _=m+1,O=t.unescapedIndexOf(a,";",_),u=t.unescapedIndexOf(a,":",_),m=u!==-1&&u<O?(O=u,!1):O===-1?(O=u===-1?a.length:u,!1):p=O,y=a.substr(_,O-_);y=i._rfc6868Escape(y),y=D?i._parseMultiValue(y,l||D,b,[],null,f):i._parseValue(y,b,f),D&&s in T?Array.isArray(T[s])?T[s].push(y):T[s]=[T[s],y]:T[s]=y}return[T,y,_]},i._rfc6868Escape=function(a){return a.replace(/\^['n^]/g,function(c){return h[c]})};var h={"^'":'"',"^n":`
`,"^^":"^"};return i._parseMultiValue=function(a,c,f,s,l,p,m){var T,_,D=0;if(c.length===0)return a;for(;(T=t.unescapedIndexOf(a,c,D))!==-1;)_=a.substr(D,T-D),_=l?i._parseMultiValue(_,l,f,[],null,p,m):i._parseValue(_,f,p,m),s.push(_),D=T+c.length;return _=a.substr(D),_=l?i._parseMultiValue(_,l,f,[],null,p,m):i._parseValue(_,f,p,m),s.push(_),s.length==1?s[0]:s},i._eachLine=function(a,c){for(var f,s,l,p=a.length,m=a.search(o),T=m;l=1<(T=a.indexOf(`
`,m)+1)&&a[T-2]==="\r"?2:1,T===0&&(T=p,l=0),(s=a[m])===" "||s==="	"?f+=a.substr(m+1,T-m-(l+1)):(f&&c(null,f),f=a.substr(m,T-m-l)),(m=T)!==p;);(f=f.trim()).length&&c(null,f)},i}(),n.Component=function(){function o(e,t){this.jCal=e=typeof e=="string"?[e,[],[]]:e,this.parent=t||null}return o.prototype={_hydratedPropertyCount:0,_hydratedComponentCount:0,get name(){return this.jCal[0]},get _designSet(){return this.parent&&this.parent._designSet||n.design.getDesignSet(this.name)},_hydrateComponent:function(e){if(this._components||(this._components=[],this._hydratedComponentCount=0),this._components[e])return this._components[e];var t=new o(this.jCal[2][e],this);return this._hydratedComponentCount++,this._components[e]=t},_hydrateProperty:function(e){if(this._properties||(this._properties=[],this._hydratedPropertyCount=0),this._properties[e])return this._properties[e];var t=new n.Property(this.jCal[1][e],this);return this._hydratedPropertyCount++,this._properties[e]=t},getFirstSubcomponent:function(e){if(e){for(var t=0,r=this.jCal[2],i=r.length;t<i;t++)if(r[t][0]===e)return this._hydrateComponent(t)}else if(this.jCal[2].length)return this._hydrateComponent(0);return null},getAllSubcomponents:function(e){var t=this.jCal[2].length,r=0;if(e){for(var i=this.jCal[2],h=[];r<t;r++)e===i[r][0]&&h.push(this._hydrateComponent(r));return h}if(!this._components||this._hydratedComponentCount!==t)for(;r<t;r++)this._hydrateComponent(r);return this._components||[]},hasProperty:function(e){for(var t=this.jCal[1],r=t.length,i=0;i<r;i++)if(t[i][0]===e)return!0;return!1},getFirstProperty:function(e){if(e){for(var t=0,r=this.jCal[1],i=r.length;t<i;t++)if(r[t][0]===e)return this._hydrateProperty(t)}else if(this.jCal[1].length)return this._hydrateProperty(0);return null},getFirstPropertyValue:function(e){return e=this.getFirstProperty(e),e?e.getFirstValue():null},getAllProperties:function(e){var t=this.jCal[1].length,r=0;if(e){for(var i=this.jCal[1],h=[];r<t;r++)e===i[r][0]&&h.push(this._hydrateProperty(r));return h}if(!this._properties||this._hydratedPropertyCount!==t)for(;r<t;r++)this._hydrateProperty(r);return this._properties||[]},_removeObjectByIndex:function(e,t,r){var i;!(t=t||[])[r]||"parent"in(i=t[r])&&(i.parent=null),t.splice(r,1),this.jCal[e].splice(r,1)},_removeObject:function(e,t,r){var i=0,h=this.jCal[e],a=h.length,c=this[t];if(typeof r=="string"){for(;i<a;i++)if(h[i][0]===r)return this._removeObjectByIndex(e,c,i),!0}else if(c){for(;i<a;i++)if(c[i]&&c[i]===r)return this._removeObjectByIndex(e,c,i),!0}return!1},_removeAllObjects:function(e,t,r){for(var i=this[t],h=this.jCal[e],a=h.length-1;0<=a;a--)r&&h[a][0]!==r||this._removeObjectByIndex(e,i,a)},addSubcomponent:function(e){this._components||(this._components=[],this._hydratedComponentCount=0),e.parent&&e.parent.removeSubcomponent(e);var t=this.jCal[2].push(e.jCal);return this._components[t-1]=e,this._hydratedComponentCount++,e.parent=this,e},removeSubcomponent:function(e){return e=this._removeObject(2,"_components",e),e&&this._hydratedComponentCount--,e},removeAllSubcomponents:function(e){return e=this._removeAllObjects(2,"_components",e),this._hydratedComponentCount=0,e},addProperty:function(e){if(!(e instanceof n.Property))throw new TypeError("must instance of ICAL.Property");this._properties||(this._properties=[],this._hydratedPropertyCount=0),e.parent&&e.parent.removeProperty(e);var t=this.jCal[1].push(e.jCal);return this._properties[t-1]=e,this._hydratedPropertyCount++,e.parent=this,e},addPropertyWithValue:function(e,t){return e=new n.Property(e),e.setValue(t),this.addProperty(e),e},updatePropertyWithValue:function(e,t){var r=this.getFirstProperty(e);return r?r.setValue(t):r=this.addPropertyWithValue(e,t),r},removeProperty:function(e){return e=this._removeObject(1,"_properties",e),e&&this._hydratedPropertyCount--,e},removeAllProperties:function(e){return e=this._removeAllObjects(1,"_properties",e),this._hydratedPropertyCount=0,e},toJSON:function(){return this.jCal},toString:function(){return n.stringify.component(this.jCal,this._designSet)}},o.fromString=function(e){return new o(n.parse.component(e))},o}(),n.Property=function(){var o=n.design;function e(t,r){this._parent=r||null,typeof t=="string"?(this.jCal=[t,{},o.defaultType],this.jCal[2]=this.getDefaultType()):this.jCal=t,this._updateType()}return e.prototype={get type(){return this.jCal[2]},get name(){return this.jCal[0]},get parent(){return this._parent},set parent(t){var r=!this._parent||t&&t._designSet!=this._parent._designSet;return this._parent=t,this.type==o.defaultType&&r&&(this.jCal[2]=this.getDefaultType(),this._updateType()),t},get _designSet(){return this.parent?this.parent._designSet:o.defaultSet},_updateType:function(){var t=this._designSet;this.type in t.value&&(t.value[this.type],"decorate"in t.value[this.type]?this.isDecorated=!0:this.isDecorated=!1,this.name in t.property&&(this.isMultiValue="multiValue"in t.property[this.name],this.isStructuredValue="structuredValue"in t.property[this.name]))},_hydrateValue:function(t){return this._values&&this._values[t]?this._values[t]:this.jCal.length<=3+t?null:this.isDecorated?(this._values||(this._values=[]),this._values[t]=this._decorate(this.jCal[3+t])):this.jCal[3+t]},_decorate:function(t){return this._designSet.value[this.type].decorate(t,this)},_undecorate:function(t){return this._designSet.value[this.type].undecorate(t,this)},_setDecoratedValue:function(t,r){this._values||(this._values=[]),typeof t=="object"&&"icaltype"in t?(this.jCal[3+r]=this._undecorate(t),this._values[r]=t):(this.jCal[3+r]=t,this._values[r]=this._decorate(t))},getParameter:function(t){if(t in this.jCal[1])return this.jCal[1][t]},getFirstParameter:function(t){return t=this.getParameter(t),Array.isArray(t)?t[0]:t},setParameter:function(t,r){var i=t.toLowerCase();typeof r=="string"&&i in this._designSet.param&&"multiValue"in this._designSet.param[i]&&(r=[r]),this.jCal[1][t]=r},removeParameter:function(t){delete this.jCal[1][t]},getDefaultType:function(){var t=this.jCal[0],r=this._designSet;return t in r.property&&(t=r.property[t],"defaultType"in t)?t.defaultType:o.defaultType},resetType:function(t){this.removeAllValues(),this.jCal[2]=t,this._updateType()},getFirstValue:function(){return this._hydrateValue(0)},getValues:function(){var t=this.jCal.length-3;if(t<1)return[];for(var r=0,i=[];r<t;r++)i[r]=this._hydrateValue(r);return i},removeAllValues:function(){this._values&&(this._values.length=0),this.jCal.length=3},setValues:function(t){if(!this.isMultiValue)throw new Error(this.name+`: does not not support mulitValue.
override isMultiValue`);var r=t.length,i=0;if(this.removeAllValues(),0<r&&typeof t[0]=="object"&&"icaltype"in t[0]&&this.resetType(t[0].icaltype),this.isDecorated)for(;i<r;i++)this._setDecoratedValue(t[i],i);else for(;i<r;i++)this.jCal[3+i]=t[i]},setValue:function(t){this.removeAllValues(),typeof t=="object"&&"icaltype"in t&&this.resetType(t.icaltype),this.isDecorated?this._setDecoratedValue(t,0):this.jCal[3]=t},toJSON:function(){return this.jCal},toICALString:function(){return n.stringify.property(this.jCal,this._designSet,!0)}},e.fromString=function(t,r){return new e(n.parse.property(t,r))},e}(),n.UtcOffset=function(){function o(e){this.fromData(e)}return o.prototype={hours:0,minutes:0,factor:1,icaltype:"utc-offset",clone:function(){return n.UtcOffset.fromSeconds(this.toSeconds())},fromData:function(e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._normalize()},fromSeconds:function(e){var t=Math.abs(e);return this.factor=e<0?-1:1,this.hours=n.helpers.trunc(t/3600),t-=3600*this.hours,this.minutes=n.helpers.trunc(t/60),this},toSeconds:function(){return this.factor*(60*this.minutes+3600*this.hours)},compare:function(r){var t=this.toSeconds(),r=r.toSeconds();return(r<t)-(t<r)},_normalize:function(){for(var e=this.toSeconds(),t=this.factor;e<-43200;)e+=97200;for(;50400<e;)e-=97200;this.fromSeconds(e),e==0&&(this.factor=t)},toICALString:function(){return n.design.icalendar.value["utc-offset"].toICAL(this.toString())},toString:function(){return(this.factor==1?"+":"-")+n.helpers.pad2(this.hours)+":"+n.helpers.pad2(this.minutes)}},o.fromString=function(e){var t={};return t.factor=e[0]==="+"?1:-1,t.hours=n.helpers.strictParseInt(e.substr(1,2)),t.minutes=n.helpers.strictParseInt(e.substr(4,2)),new n.UtcOffset(t)},o.fromSeconds=function(e){var t=new o;return t.fromSeconds(e),t},o}(),n.Binary=function(){function o(e){this.value=e}return o.prototype={icaltype:"binary",decodeValue:function(){return this._b64_decode(this.value)},setEncodedValue:function(e){this.value=this._b64_encode(e)},_b64_encode:function(e){var t,r,i,h,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=0,f=0,l="",s=[];if(!e)return e;for(;t=(h=e.charCodeAt(c++)<<16|e.charCodeAt(c++)<<8|e.charCodeAt(c++))>>12&63,r=h>>6&63,i=63&h,s[f++]=a.charAt(h>>18&63)+a.charAt(t)+a.charAt(r)+a.charAt(i),c<e.length;);var l=s.join(""),p=e.length%3;return(p?l.slice(0,p-3):l)+"===".slice(p||3)},_b64_decode:function(e){var t,r,i,h,a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,s=0,l=[];if(!e)return e;for(e+="";t=(a=c.indexOf(e.charAt(f++))<<18|c.indexOf(e.charAt(f++))<<12|(i=c.indexOf(e.charAt(f++)))<<6|(h=c.indexOf(e.charAt(f++))))>>16&255,r=a>>8&255,a=255&a,l[s++]=i==64?String.fromCharCode(t):h==64?String.fromCharCode(t,r):String.fromCharCode(t,r,a),f<e.length;);return l.join("")},toString:function(){return this.value}},o.fromString=function(e){return new o(e)},o}(),n.Period=function(o){if(this.wrappedJSObject=this,o&&"start"in o){if(o.start&&!(o.start instanceof n.Time))throw new TypeError(".start must be an instance of ICAL.Time");this.start=o.start}if(o&&o.end&&o.duration)throw new Error("cannot accept both end and duration");if(o&&"end"in o){if(o.end&&!(o.end instanceof n.Time))throw new TypeError(".end must be an instance of ICAL.Time");this.end=o.end}if(o&&"duration"in o){if(o.duration&&!(o.duration instanceof n.Duration))throw new TypeError(".duration must be an instance of ICAL.Duration");this.duration=o.duration}},n.Period.prototype={start:null,end:null,duration:null,icalclass:"icalperiod",icaltype:"period",clone:function(){return n.Period.fromData({start:this.start?this.start.clone():null,end:this.end?this.end.clone():null,duration:this.duration?this.duration.clone():null})},getDuration:function(){return this.duration||this.end.subtractDate(this.start)},getEnd:function(){if(this.end)return this.end;var o=this.start.clone();return o.addDuration(this.duration),o},toString:function(){return this.start+"/"+(this.end||this.duration)},toJSON:function(){return[this.start.toString(),(this.end||this.duration).toString()]},toICALString:function(){return this.start.toICALString()+"/"+(this.end||this.duration).toICALString()}},n.Period.fromString=function(o,e){var t=o.split("/");if(t.length!==2)throw new Error('Invalid string value: "'+o+'" must contain a "/" char.');return o={start:n.Time.fromDateTimeString(t[0],e)},t=t[1],n.Duration.isValueString(t)?o.duration=n.Duration.fromString(t):o.end=n.Time.fromDateTimeString(t,e),new n.Period(o)},n.Period.fromData=function(o){return new n.Period(o)},n.Period.fromJSON=function(o,e,t){function r(i,h){return t?n.Time.fromString(i,h):n.Time.fromDateTimeString(i,h)}return n.Duration.isValueString(o[1])?n.Period.fromData({start:r(o[0],e),duration:n.Duration.fromString(o[1])}):n.Period.fromData({start:r(o[0],e),end:r(o[1],e)})},function(){var o=/([PDWHMTS]{1,1})/;n.Duration=function(e){(this.wrappedJSObject=this).fromData(e)},n.Duration.prototype={weeks:0,days:0,hours:0,minutes:0,seconds:0,isNegative:!1,icalclass:"icalduration",icaltype:"duration",clone:function(){return n.Duration.fromData(this)},toSeconds:function(){var e=this.seconds+60*this.minutes+3600*this.hours+86400*this.days+604800*this.weeks;return this.isNegative?-e:e},fromSeconds:function(e){var t=Math.abs(e);return this.isNegative=e<0,this.days=n.helpers.trunc(t/86400),this.days%7==0?(this.weeks=this.days/7,this.days=0):this.weeks=0,t-=86400*(this.days+7*this.weeks),this.hours=n.helpers.trunc(t/3600),t-=3600*this.hours,this.minutes=n.helpers.trunc(t/60),t-=60*this.minutes,this.seconds=t,this},fromData:function(e){var t,r,i=["weeks","days","hours","minutes","seconds","isNegative"];for(t in i)i.hasOwnProperty(t)&&(r=i[t],e&&r in e?this[r]=e[r]:this[r]=0)},reset:function(){this.isNegative=!1,this.weeks=0,this.days=0,this.hours=0,this.minutes=0,this.seconds=0},compare:function(r){var t=this.toSeconds(),r=r.toSeconds();return(r<t)-(t<r)},normalize:function(){this.fromSeconds(this.toSeconds())},toString:function(){if(this.toSeconds()==0)return"PT0S";var e="";return this.isNegative&&(e+="-"),e+="P",this.weeks&&(e+=this.weeks+"W"),this.days&&(e+=this.days+"D"),(this.hours||this.minutes||this.seconds)&&(e+="T",this.hours&&(e+=this.hours+"H"),this.minutes&&(e+=this.minutes+"M"),this.seconds&&(e+=this.seconds+"S")),e},toICALString:function(){return this.toString()}},n.Duration.fromSeconds=function(e){return new n.Duration().fromSeconds(e)},n.Duration.isValueString=function(e){return e[0]==="P"||e[1]==="P"},n.Duration.fromString=function(e){for(var t,r=Object.create(null),i=0;(t=e.search(o))!==-1;){var h=e[t],a=e.substr(0,t);e=e.substr(t+1),i+=function(c,f,s){var l;switch(c){case"P":s.isNegative=!(!f||f!=="-");break;case"D":l="days";break;case"W":l="weeks";break;case"H":l="hours";break;case"M":l="minutes";break;case"S":l="seconds";break;default:return 0}if(l){if(!f&&f!==0)throw new Error('invalid duration value: Missing number before "'+c+'"');var p=parseInt(f,10);if(n.helpers.isStrictlyNaN(p))throw new Error('invalid duration value: Invalid number "'+f+'" before "'+c+'"');s[l]=p}return 1}(h,a,r)}if(i<2)throw new Error('invalid duration value: Not enough duration components in "'+e+'"');return new n.Duration(r)},n.Duration.fromData=function(e){return new n.Duration(e)}}(),function(){var o=["tzid","location","tznames","latitude","longitude"];n.Timezone=function(e){(this.wrappedJSObject=this).fromData(e)},n.Timezone.prototype={tzid:"",location:"",tznames:"",latitude:0,longitude:0,component:null,expandedUntilYear:0,icalclass:"icaltimezone",fromData:function(e){var t,r,i;if(this.expandedUntilYear=0,this.changes=[],e instanceof n.Component)this.component=e;else for(r in e&&"component"in e&&(typeof e.component=="string"?(t=n.parse(e.component),this.component=new n.Component(t)):e.component instanceof n.Component?this.component=e.component:this.component=null),o)o.hasOwnProperty(r)&&(i=o[r],e&&i in e&&(this[i]=e[i]));return this.component instanceof n.Component&&!this.tzid&&(this.tzid=this.component.getFirstPropertyValue("tzid")),this},utcOffset:function(e){if(this==n.Timezone.utcTimezone||this==n.Timezone.localTimezone||(this._ensureCoverage(e.year),!this.changes.length))return 0;for(var t={year:e.year,month:e.month,day:e.day,hour:e.hour,minute:e.minute,second:e.second},r=this._findNearbyChange(t),i=-1,h=1;;){var a=n.helpers.clone(this.changes[r],!0);if(a.utcOffset<a.prevUtcOffset?n.Timezone.adjust_change(a,0,0,0,a.utcOffset):n.Timezone.adjust_change(a,0,0,0,a.prevUtcOffset),0<=n.Timezone._compare_change_fn(t,a)?i=r:h=-1,h==-1&&i!=-1)break;if((r+=h)<0)return 0;if(r>=this.changes.length)break}var c=this.changes[i];return c.utcOffset-c.prevUtcOffset<0&&0<i&&(e=n.helpers.clone(c,!0),n.Timezone.adjust_change(e,0,0,0,e.prevUtcOffset),n.Timezone._compare_change_fn(t,e)<0&&(e=this.changes[i-1],c.is_daylight!=0&&e.is_daylight==0&&(c=e))),c.utcOffset},_findNearbyChange:function(e){return e=n.helpers.binsearchInsert(this.changes,e,n.Timezone._compare_change_fn),e>=this.changes.length?this.changes.length-1:e},_ensureCoverage:function(e){var t;n.Timezone._minimumExpansionYear==-1&&(t=n.Time.now(),n.Timezone._minimumExpansionYear=t.year);var r=e;if(r<n.Timezone._minimumExpansionYear&&(r=n.Timezone._minimumExpansionYear),(r+=n.Timezone.EXTRA_COVERAGE)>n.Timezone.MAX_YEAR&&(r=n.Timezone.MAX_YEAR),!this.changes.length||this.expandedUntilYear<e){for(var i=this.component.getAllSubcomponents(),h=i.length,a=0;a<h;a++)this._expandComponent(i[a],r,this.changes);this.changes.sort(n.Timezone._compare_change_fn),this.expandedUntilYear=r}},_expandComponent:function(e,t,r){if(!e.hasProperty("dtstart")||!e.hasProperty("tzoffsetto")||!e.hasProperty("tzoffsetfrom"))return null;var i=e.getFirstProperty("dtstart").getFirstValue();function h(_){return _.factor*(3600*_.hours+60*_.minutes)}function a(){var _={};return _.is_daylight=e.name=="daylight",_.utcOffset=h(e.getFirstProperty("tzoffsetto").getFirstValue()),_.prevUtcOffset=h(e.getFirstProperty("tzoffsetfrom").getFirstValue()),_}if(e.hasProperty("rrule")||e.hasProperty("rdate")){var c,f,s,l=e.getAllProperties("rdate");for(c in l)l.hasOwnProperty(c)&&(f=l[c].getFirstValue(),(s=a()).year=f.year,s.month=f.month,s.day=f.day,f.isDate?(s.hour=i.hour,s.minute=i.minute,s.second=i.second,i.zone!=n.Timezone.utcTimezone&&n.Timezone.adjust_change(s,0,0,0,-s.prevUtcOffset)):(s.hour=f.hour,s.minute=f.minute,s.second=f.second,f.zone!=n.Timezone.utcTimezone&&n.Timezone.adjust_change(s,0,0,0,-s.prevUtcOffset)),r.push(s));var p=e.getFirstProperty("rrule");if(p){p=p.getFirstValue(),s=a(),p.until&&p.until.zone==n.Timezone.utcTimezone&&(p.until.adjust(0,0,0,s.prevUtcOffset),p.until.zone=n.Timezone.localTimezone);for(var m,T=p.iterator(i);(m=T.next())&&(s=a(),!(m.year>t)&&m);)s.year=m.year,s.month=m.month,s.day=m.day,s.hour=m.hour,s.minute=m.minute,s.second=m.second,s.isDate=m.isDate,n.Timezone.adjust_change(s,0,0,0,-s.prevUtcOffset),r.push(s)}}else(s=a()).year=i.year,s.month=i.month,s.day=i.day,s.hour=i.hour,s.minute=i.minute,s.second=i.second,n.Timezone.adjust_change(s,0,0,0,-s.prevUtcOffset),r.push(s);return r},toString:function(){return this.tznames||this.tzid}},n.Timezone._compare_change_fn=function(e,t){return e.year<t.year?-1:e.year>t.year?1:e.month<t.month?-1:e.month>t.month?1:e.day<t.day?-1:e.day>t.day?1:e.hour<t.hour?-1:e.hour>t.hour?1:e.minute<t.minute?-1:e.minute>t.minute?1:e.second<t.second?-1:e.second>t.second?1:0},n.Timezone.convert_time=function(e,t,r){return e.isDate||t.tzid==r.tzid||t==n.Timezone.localTimezone||r==n.Timezone.localTimezone?(e.zone=r,e):(t=t.utcOffset(e),e.adjust(0,0,0,-t),t=r.utcOffset(e),e.adjust(0,0,0,t),null)},n.Timezone.fromData=function(e){return new n.Timezone().fromData(e)},n.Timezone.utcTimezone=n.Timezone.fromData({tzid:"UTC"}),n.Timezone.localTimezone=n.Timezone.fromData({tzid:"floating"}),n.Timezone.adjust_change=function(e,t,r,i,h){return n.Time.prototype.adjust.call(e,t,r,i,h,e)},n.Timezone._minimumExpansionYear=-1,n.Timezone.MAX_YEAR=2035,n.Timezone.EXTRA_COVERAGE=5}(),n.TimezoneService=function(){var o,e={get count(){return Object.keys(o).length},reset:function(){o=Object.create(null);var t=n.Timezone.utcTimezone;o.Z=t,o.UTC=t,o.GMT=t},has:function(t){return!!o[t]},get:function(t){return o[t]},register:function(t,r){if(t instanceof n.Component&&t.name==="vtimezone"&&(t=(r=new n.Timezone(t)).tzid),!(r instanceof n.Timezone))throw new TypeError("timezone must be ICAL.Timezone or ICAL.Component");o[t]=r},remove:function(t){return delete o[t]}};return e.reset(),e}(),function(){function o(e){Object.defineProperty(n.Time.prototype,e,{get:function(){return this._pendingNormalization&&(this._normalize(),this._pendingNormalization=!1),this._time[e]},set:function(t){return e==="isDate"&&t&&!this._time.isDate&&this.adjust(0,0,0,0),this._cachedUnixTime=null,this._pendingNormalization=!0,this._time[e]=t}})}n.Time=function(e,t){var r=(this.wrappedJSObject=this)._time=Object.create(null);r.year=0,r.month=1,r.day=1,r.hour=0,r.minute=0,r.second=0,r.isDate=!1,this.fromData(e,t)},n.Time._dowCache={},n.Time._wnCache={},n.Time.prototype={icalclass:"icaltime",_cachedUnixTime:null,get icaltype(){return this.isDate?"date":"date-time"},zone:null,_pendingNormalization:!1,clone:function(){return new n.Time(this._time,this.zone)},reset:function(){this.fromData(n.Time.epochTime),this.zone=n.Timezone.utcTimezone},resetTo:function(e,t,r,i,h,a,c){this.fromData({year:e,month:t,day:r,hour:i,minute:h,second:a,zone:c})},fromJSDate:function(e,t){return e?t?(this.zone=n.Timezone.utcTimezone,this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()):(this.zone=n.Timezone.localTimezone,this.year=e.getFullYear(),this.month=e.getMonth()+1,this.day=e.getDate(),this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds()):this.reset(),this._cachedUnixTime=null,this},fromData:function(e,t){if(e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&r!=="icaltype"&&(this[r]=e[r]);return t&&(this.zone=t),!e||"isDate"in e?e&&"isDate"in e&&(this.isDate=e.isDate):this.isDate=!("hour"in e),e&&"timezone"in e&&(t=n.TimezoneService.get(e.timezone),this.zone=t||n.Timezone.localTimezone),e&&"zone"in e&&(this.zone=e.zone),this.zone||(this.zone=n.Timezone.localTimezone),this._cachedUnixTime=null,this},dayOfWeek:function(h){var t=h||n.Time.SUNDAY,r=(this.year<<12)+(this.month<<8)+(this.day<<3)+t;if(r in n.Time._dowCache)return n.Time._dowCache[r];var i=this.day,a=this.month+(this.month<3?12:0),h=this.year-(this.month<3?1:0),a=i+h+n.helpers.trunc(26*(a+1)/10)+n.helpers.trunc(h/4);return a+=6*n.helpers.trunc(h/100)+n.helpers.trunc(h/400),n.Time._dowCache[r]=a=(a+7-t)%7+1},dayOfYear:function(){var e=n.Time.isLeapYear(this.year)?1:0;return n.Time.daysInYearPassedMonth[e][this.month-1]+this.day},startOfWeek:function(r){var t=r||n.Time.SUNDAY,r=this.clone();return r.day-=(this.dayOfWeek()+7-t)%7,r.isDate=!0,r.hour=0,r.minute=0,r.second=0,r},endOfWeek:function(r){var t=r||n.Time.SUNDAY,r=this.clone();return r.day+=(7-this.dayOfWeek()+t-n.Time.SUNDAY)%7,r.isDate=!0,r.hour=0,r.minute=0,r.second=0,r},startOfMonth:function(){var e=this.clone();return e.day=1,e.isDate=!0,e.hour=0,e.minute=0,e.second=0,e},endOfMonth:function(){var e=this.clone();return e.day=n.Time.daysInMonth(e.month,e.year),e.isDate=!0,e.hour=0,e.minute=0,e.second=0,e},startOfYear:function(){var e=this.clone();return e.day=1,e.month=1,e.isDate=!0,e.hour=0,e.minute=0,e.second=0,e},endOfYear:function(){var e=this.clone();return e.day=31,e.month=12,e.isDate=!0,e.hour=0,e.minute=0,e.second=0,e},startDoyWeek:function(e){return e=e||n.Time.SUNDAY,e=this.dayOfWeek()-e,e<0&&(e+=7),this.dayOfYear()-e},getDominicalLetter:function(){return n.Time.getDominicalLetter(this.year)},nthWeekDay:function(e,t){var r=n.Time.daysInMonth(this.month,this.year),i=t,h=0,a=this.clone(),c=0<=i?(a.day=1,i!=0&&i--,h=a.day,(t=e-a.dayOfWeek())<0&&(t+=7),h+=t,h-=e,e):(a.day=r,i++,(c=a.dayOfWeek()-e)<0&&(c+=7),r-c);return h+(c+=7*i)},isNthWeekDay:function(e,t){var r=this.dayOfWeek();return t===0&&r===e||this.nthWeekDay(e,t)===this.day},weekNumber:function(e){var t=(this.year<<12)+(this.month<<8)+(this.day<<3)+e;if(t in n.Time._wnCache)return n.Time._wnCache[t];var r=this.clone();r.isDate=!0;var i=this.year;r.month==12&&25<r.day?(h=n.Time.weekOneStarts(i+1,e),r.compare(h)<0?h=n.Time.weekOneStarts(i,e):i++):(h=n.Time.weekOneStarts(i,e),r.compare(h)<0&&(h=n.Time.weekOneStarts(--i,e)));var h=r.subtractDate(h).toSeconds()/86400,h=n.helpers.trunc(h/7)+1;return n.Time._wnCache[t]=h},addDuration:function(e){var t=e.isNegative?-1:1,r=this.second,i=this.minute,h=this.hour,a=this.day;r+=t*e.seconds,i+=t*e.minutes,h+=t*e.hours,a+=t*e.days,a+=7*t*e.weeks,this.second=r,this.minute=i,this.hour=h,this.day=a,this._cachedUnixTime=null},subtractDate:function(r){var t=this.toUnixTime()+this.utcOffset(),r=r.toUnixTime()+r.utcOffset();return n.Duration.fromSeconds(t-r)},subtractDateTz:function(r){var t=this.toUnixTime(),r=r.toUnixTime();return n.Duration.fromSeconds(t-r)},compare:function(r){var t=this.toUnixTime(),r=r.toUnixTime();return r<t?1:t<r?-1:0},compareDateOnlyTz:function(e,a){function r(c){return n.Time._cmp_attr(i,h,c)}var i=this.convertToZone(a),h=e.convertToZone(a),a=0;return(a=r("year"))==0&&(a=r("month"))==0?r("day"):a},convertToZone:function(e){var t=this.clone(),r=this.zone.tzid==e.tzid;return this.isDate||r||n.Timezone.convert_time(t,this.zone,e),t.zone=e,t},utcOffset:function(){return this.zone==n.Timezone.localTimezone||this.zone==n.Timezone.utcTimezone?0:this.zone.utcOffset(this)},toICALString:function(){var e=this.toString();return(10<e.length?n.design.icalendar.value["date-time"]:n.design.icalendar.value.date).toICAL(e)},toString:function(){var e=this.year+"-"+n.helpers.pad2(this.month)+"-"+n.helpers.pad2(this.day);return this.isDate||(e+="T"+n.helpers.pad2(this.hour)+":"+n.helpers.pad2(this.minute)+":"+n.helpers.pad2(this.second),this.zone===n.Timezone.utcTimezone&&(e+="Z")),e},toJSDate:function(){return this.zone==n.Timezone.localTimezone?this.isDate?new Date(this.year,this.month-1,this.day):new Date(this.year,this.month-1,this.day,this.hour,this.minute,this.second,0):new Date(1e3*this.toUnixTime())},_normalize:function(){return this._time.isDate,this._time.isDate&&(this._time.hour=0,this._time.minute=0,this._time.second=0),this.adjust(0,0,0,0),this},adjust:function(e,t,r,i,h){var a,c,f=0,s=0,l=h||this._time;if(l.isDate||(i=l.second+i,l.second=i%60,i=n.helpers.trunc(i/60),l.second<0&&(l.second+=60,i--),i=l.minute+r+i,l.minute=i%60,i=n.helpers.trunc(i/60),l.minute<0&&(l.minute+=60,i--),i=l.hour+t+i,l.hour=i%24,f=n.helpers.trunc(i/24),l.hour<0&&(l.hour+=24,f--)),12<l.month?s=n.helpers.trunc((l.month-1)/12):l.month<1&&(s=n.helpers.trunc(l.month/12)-1),l.year+=s,l.month-=12*s,0<(a=l.day+e+f))for(;!(a<=(c=n.Time.daysInMonth(l.month,l.year)));)l.month++,12<l.month&&(l.year++,l.month=1),a-=c;else for(;a<=0;)l.month==1?(l.year--,l.month=12):l.month--,a+=n.Time.daysInMonth(l.month,l.year);return l.day=a,this._cachedUnixTime=null,this},fromUnixTime:function(e){this.zone=n.Timezone.utcTimezone;var t=n.Time.epochTime.clone();t.adjust(0,0,0,e),this.year=t.year,this.month=t.month,this.day=t.day,this.hour=t.hour,this.minute=t.minute,this.second=Math.floor(t.second),this._cachedUnixTime=null},toUnixTime:function(){if(this._cachedUnixTime!==null)return this._cachedUnixTime;var e=this.utcOffset(),e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second-e);return this._cachedUnixTime=e/1e3,this._cachedUnixTime},toJSON:function(){for(var e,t=["year","month","day","hour","minute","second","isDate"],r=Object.create(null),i=0,h=t.length;i<h;i++)r[e=t[i]]=this[e];return this.zone&&(r.timezone=this.zone.tzid),r}},"defineProperty"in Object&&(o("year"),o("month"),o("day"),o("hour"),o("minute"),o("second"),o("isDate")),n.Time.daysInMonth=function(e,t){var r=30;return e<1||12<e||(r=[0,31,28,31,30,31,30,31,31,30,31,30,31][e],e==2&&(r+=n.Time.isLeapYear(t))),r},n.Time.isLeapYear=function(e){return e<=1752?e%4==0:e%4==0&&e%100!=0||e%400==0},n.Time.fromDayOfYear=function(e,r){var r=r,i=e,h=new n.Time;h.auto_normalize=!1;var a=n.Time.isLeapYear(r)?1:0;if(i<1)return a=n.Time.isLeapYear(--r)?1:0,i+=n.Time.daysInYearPassedMonth[a][12],n.Time.fromDayOfYear(i,r);if(i>n.Time.daysInYearPassedMonth[a][12])return a=n.Time.isLeapYear(r)?1:0,i-=n.Time.daysInYearPassedMonth[a][12],n.Time.fromDayOfYear(i,++r);h.year=r,h.isDate=!0;for(var c=11;0<=c;c--)if(i>n.Time.daysInYearPassedMonth[a][c]){h.month=c+1,h.day=i-n.Time.daysInYearPassedMonth[a][c];break}return h.auto_normalize=!0,h},n.Time.fromStringv2=function(e){return new n.Time({year:parseInt(e.substr(0,4),10),month:parseInt(e.substr(5,2),10),day:parseInt(e.substr(8,2),10),isDate:!0})},n.Time.fromDateString=function(e){return new n.Time({year:n.helpers.strictParseInt(e.substr(0,4)),month:n.helpers.strictParseInt(e.substr(5,2)),day:n.helpers.strictParseInt(e.substr(8,2)),isDate:!0})},n.Time.fromDateTimeString=function(e,t){if(e.length<19)throw new Error('invalid date-time value: "'+e+'"');var r;return e[19]&&e[19]==="Z"?r="Z":t&&(r=t.getParameter("tzid")),new n.Time({year:n.helpers.strictParseInt(e.substr(0,4)),month:n.helpers.strictParseInt(e.substr(5,2)),day:n.helpers.strictParseInt(e.substr(8,2)),hour:n.helpers.strictParseInt(e.substr(11,2)),minute:n.helpers.strictParseInt(e.substr(14,2)),second:n.helpers.strictParseInt(e.substr(17,2)),timezone:r})},n.Time.fromString=function(e,t){return 10<e.length?n.Time.fromDateTimeString(e,t):n.Time.fromDateString(e)},n.Time.fromJSDate=function(e,t){return new n.Time().fromJSDate(e,t)},n.Time.fromData=function(e,t){return new n.Time().fromData(e,t)},n.Time.now=function(){return n.Time.fromJSDate(new Date,!1)},n.Time.weekOneStarts=function(i,h){var r=n.Time.fromData({year:i,month:1,day:1,isDate:!0}),i=r.dayOfWeek(),h=h||n.Time.DEFAULT_WEEK_START;return i>n.Time.THURSDAY&&(r.day+=7),h>n.Time.THURSDAY&&(r.day-=7),r.day-=i-h,r},n.Time.getDominicalLetter=function(e){var t="GFEDCBA",r=(e+(e/4|0)+(e/400|0)-(e/100|0)-1)%7;return n.Time.isLeapYear(e)?t[(6+r)%7]+t[r]:t[r]},n.Time.epochTime=n.Time.fromData({year:1970,month:1,day:1,hour:0,minute:0,second:0,isDate:!1,timezone:"Z"}),n.Time._cmp_attr=function(e,t,r){return e[r]>t[r]?1:e[r]<t[r]?-1:0},n.Time.daysInYearPassedMonth=[[0,31,59,90,120,151,181,212,243,273,304,334,365],[0,31,60,91,121,152,182,213,244,274,305,335,366]],n.Time.SUNDAY=1,n.Time.MONDAY=2,n.Time.TUESDAY=3,n.Time.WEDNESDAY=4,n.Time.THURSDAY=5,n.Time.FRIDAY=6,n.Time.SATURDAY=7,n.Time.DEFAULT_WEEK_START=n.Time.MONDAY}(),n.VCardTime=function(o,e,t){var r=(this.wrappedJSObject=this)._time=Object.create(null);r.year=null,r.month=null,r.day=null,r.hour=null,r.minute=null,r.second=null,this.icaltype=t||"date-and-or-time",this.fromData(o,e)},n.helpers.inherits(n.Time,n.VCardTime,{icalclass:"vcardtime",icaltype:"date-and-or-time",zone:null,clone:function(){return new n.VCardTime(this._time,this.zone,this.icaltype)},_normalize:function(){return this},utcOffset:function(){return this.zone instanceof n.UtcOffset?this.zone.toSeconds():n.Time.prototype.utcOffset.apply(this,arguments)},toICALString:function(){return n.design.vcard.value[this.icaltype].toICAL(this.toString())},toString:function(){var o,e=n.helpers.pad2,t=this.year,r=this.month,i=this.day,h=this.hour,a=this.minute,c=this.second,f=r!==null,s=i!==null,l=h!==null,p=a!==null,m=c!==null,T=(t!==null?e(t)+(f||s?"-":""):f||s?"--":"")+(f?e(r):"")+(s?"-"+e(i):""),_=(l?e(h):"-")+(l&&p?":":"")+(p?e(a):"")+(l||p?"":"-")+(p&&m?":":"")+(m?e(c):"");switch(o=this.zone===n.Timezone.utcTimezone?"Z":this.zone instanceof n.UtcOffset?this.zone.toString():this.zone!==n.Timezone.localTimezone&&this.zone instanceof n.Timezone?n.UtcOffset.fromSeconds(this.zone.utcOffset(this)).toString():"",this.icaltype){case"time":return _+o;case"date-and-or-time":case"date-time":return T+(_=="--"?"":"T"+_+o);case"date":return T}return null}}),n.VCardTime.fromDateAndOrTimeString=function(i,e){function t(l,p,m){return l?n.helpers.strictParseInt(l.substr(p,m)):null}var h=i.split("T"),r=h[0],a=h[1],c=a?n.design.vcard.value.time._splitZone(a):[],s=c[0],f=c[1],i=(n.helpers.strictParseInt,r?r.length:0),h=f?f.length:0,a=r&&r[0]=="-"&&r[1]=="-",c=f&&f[0]=="-",f={year:a?null:t(r,0,4),month:!a||i!=4&&i!=7?i==7||i==10?t(r,5,2):null:t(r,2,2),day:i==5?t(r,3,2):i==7&&a?t(r,5,2):i==10?t(r,8,2):null,hour:c?null:t(f,0,2),minute:c&&h==3?t(f,1,2):4<h?t(f,c?1:3,2):null,second:h==4?t(f,2,2):h==6?t(f,4,2):h==8?t(f,6,2):null},s=s=="Z"?n.Timezone.utcTimezone:s&&s[3]==":"?n.UtcOffset.fromString(s):null;return new n.VCardTime(f,s,e)},function(){var o,e={SU:n.Time.SUNDAY,MO:n.Time.MONDAY,TU:n.Time.TUESDAY,WE:n.Time.WEDNESDAY,TH:n.Time.THURSDAY,FR:n.Time.FRIDAY,SA:n.Time.SATURDAY},t={};for(o in e)e.hasOwnProperty(o)&&(t[e[o]]=o);function r(s,l,p,m){var T=m;if(m[0]==="+"&&(T=m.substr(1)),T=n.helpers.strictParseInt(T),l!==void 0&&m<l)throw new Error(s+': invalid value "'+m+'" must be > '+l);if(p!==void 0&&p<m)throw new Error(s+': invalid value "'+m+'" must be < '+l);return T}n.Recur=function(s){(this.wrappedJSObject=this).parts={},s&&typeof s=="object"&&this.fromData(s)},n.Recur.prototype={parts:null,interval:1,wkst:n.Time.MONDAY,until:null,count:null,freq:null,icalclass:"icalrecur",icaltype:"recur",iterator:function(s){return new n.RecurIterator({rule:this,dtstart:s})},clone:function(){return new n.Recur(this.toJSON())},isFinite:function(){return!(!this.count&&!this.until)},isByCount:function(){return!(!this.count||this.until)},addComponent:function(s,l){s=s.toUpperCase(),s in this.parts?this.parts[s].push(l):this.parts[s]=[l]},setComponent:function(s,l){this.parts[s.toUpperCase()]=l.slice()},getComponent:function(s){return s=s.toUpperCase(),s in this.parts?this.parts[s].slice():[]},getNextOccurrence:function(s,l){for(var p,m=this.iterator(s);(p=m.next())&&p.compare(l)<=0;);return p&&l.zone&&(p.zone=l.zone),p},fromData:function(s){for(var l in s){var p=l.toUpperCase();p in f?Array.isArray(s[l])?this.parts[p]=s[l]:this.parts[p]=[s[l]]:this[l]=s[l]}this.interval&&typeof this.interval!="number"&&c.INTERVAL(this.interval,this),this.wkst&&typeof this.wkst!="number"&&(this.wkst=n.Recur.icalDayToNumericDay(this.wkst)),!this.until||this.until instanceof n.Time||(this.until=n.Time.fromString(this.until))},toJSON:function(){var s,l,p=Object.create(null);for(s in p.freq=this.freq,this.count&&(p.count=this.count),1<this.interval&&(p.interval=this.interval),this.parts)this.parts.hasOwnProperty(s)&&(l=this.parts[s],Array.isArray(l)&&l.length==1?p[s.toLowerCase()]=l[0]:p[s.toLowerCase()]=n.helpers.clone(this.parts[s]));return this.until&&(p.until=this.until.toString()),"wkst"in this&&this.wkst!==n.Time.DEFAULT_WEEK_START&&(p.wkst=n.Recur.numericDayToIcalDay(this.wkst)),p},toString:function(){var s,l="FREQ="+this.freq;for(s in this.count&&(l+=";COUNT="+this.count),1<this.interval&&(l+=";INTERVAL="+this.interval),this.parts)this.parts.hasOwnProperty(s)&&(l+=";"+s+"="+this.parts[s]);return this.until&&(l+=";UNTIL="+this.until.toICALString()),"wkst"in this&&this.wkst!==n.Time.DEFAULT_WEEK_START&&(l+=";WKST="+n.Recur.numericDayToIcalDay(this.wkst)),l}},n.Recur.icalDayToNumericDay=function(s,l){return l=l||n.Time.SUNDAY,(e[s]-l+7)%7+1},n.Recur.numericDayToIcalDay=function(s,l){return l=s+(l||n.Time.SUNDAY)-n.Time.SUNDAY,7<l&&(l-=7),t[l]};var i=/^(SU|MO|TU|WE|TH|FR|SA)$/,h=/^([+-])?(5[0-3]|[1-4][0-9]|[1-9])?(SU|MO|TU|WE|TH|FR|SA)$/,a=["SECONDLY","MINUTELY","HOURLY","DAILY","WEEKLY","MONTHLY","YEARLY"],c={FREQ:function(s,l,p){if(a.indexOf(s)===-1)throw new Error('invalid frequency "'+s+'" expected: "'+a.join(", ")+'"');l.freq=s},COUNT:function(s,l,p){l.count=n.helpers.strictParseInt(s)},INTERVAL:function(s,l,p){l.interval=n.helpers.strictParseInt(s),l.interval<1&&(l.interval=1)},UNTIL:function(s,l,p){10<s.length?l.until=n.design.icalendar.value["date-time"].fromICAL(s):l.until=n.design.icalendar.value.date.fromICAL(s),p||(l.until=n.Time.fromString(l.until))},WKST:function(s,l,p){if(!i.test(s))throw new Error('invalid WKST value "'+s+'"');l.wkst=n.Recur.icalDayToNumericDay(s)}},f={BYSECOND:r.bind(this,"BYSECOND",0,60),BYMINUTE:r.bind(this,"BYMINUTE",0,59),BYHOUR:r.bind(this,"BYHOUR",0,23),BYDAY:function(s){if(h.test(s))return s;throw new Error('invalid BYDAY value "'+s+'"')},BYMONTHDAY:r.bind(this,"BYMONTHDAY",-31,31),BYYEARDAY:r.bind(this,"BYYEARDAY",-366,366),BYWEEKNO:r.bind(this,"BYWEEKNO",-53,53),BYMONTH:r.bind(this,"BYMONTH",1,12),BYSETPOS:r.bind(this,"BYSETPOS",-366,366)};n.Recur.fromString=function(s){return s=n.Recur._stringToData(s,!1),new n.Recur(s)},n.Recur.fromData=function(s){return new n.Recur(s)},n.Recur._stringToData=function(s,l){for(var p=Object.create(null),m=s.split(";"),T=m.length,_=0;_<T;_++){var O=m[_].split("="),D=O[0].toUpperCase(),b=O[0].toLowerCase(),v=l?b:D,O=O[1];if(D in f){for(var u=O.split(","),y=0,g=u.length;y<g;y++)u[y]=f[D](u[y]);p[v]=u.length==1?u[0]:u}else D in c?c[D](O,p,l):p[b]=O}return p}}(),n.RecurIterator=function(){function o(e){this.fromData(e)}return o.prototype={completed:!1,rule:null,dtstart:null,last:null,occurrence_number:0,by_indices:null,initialized:!1,by_data:null,days:null,days_index:0,fromData:function(e){if(this.rule=n.helpers.formatClassType(e.rule,n.Recur),!this.rule)throw new Error("iterator requires a (ICAL.Recur) rule");if(this.dtstart=n.helpers.formatClassType(e.dtstart,n.Time),!this.dtstart)throw new Error("iterator requires a (ICAL.Time) dtstart");e.by_data?this.by_data=e.by_data:this.by_data=n.helpers.clone(this.rule.parts,!0),e.occurrence_number&&(this.occurrence_number=e.occurrence_number),this.days=e.days||[],e.last&&(this.last=n.helpers.formatClassType(e.last,n.Time)),this.by_indices=e.by_indices,this.by_indices||(this.by_indices={BYSECOND:0,BYMINUTE:0,BYHOUR:0,BYDAY:0,BYMONTH:0,BYWEEKNO:0,BYMONTHDAY:0}),this.initialized=e.initialized||!1,this.initialized||this.init()},init:function(){this.initialized=!0,this.last=this.dtstart.clone();var e,t=this.by_data;if("BYDAY"in t&&this.sort_byday_rules(t.BYDAY),"BYYEARDAY"in t&&("BYMONTH"in t||"BYWEEKNO"in t||"BYMONTHDAY"in t||"BYDAY"in t))throw new Error("Invalid BYYEARDAY rule");if("BYWEEKNO"in t&&"BYMONTHDAY"in t)throw new Error("BYWEEKNO does not fit to BYMONTHDAY");if(this.rule.freq=="MONTHLY"&&("BYYEARDAY"in t||"BYWEEKNO"in t))throw new Error("For MONTHLY recurrences neither BYYEARDAY nor BYWEEKNO may appear");if(this.rule.freq=="WEEKLY"&&("BYYEARDAY"in t||"BYMONTHDAY"in t))throw new Error("For WEEKLY recurrences neither BYMONTHDAY nor BYYEARDAY may appear");if(this.rule.freq!="YEARLY"&&"BYYEARDAY"in t)throw new Error("BYYEARDAY may only appear in YEARLY rules");if(this.last.second=this.setup_defaults("BYSECOND","SECONDLY",this.dtstart.second),this.last.minute=this.setup_defaults("BYMINUTE","MINUTELY",this.dtstart.minute),this.last.hour=this.setup_defaults("BYHOUR","HOURLY",this.dtstart.hour),this.last.day=this.setup_defaults("BYMONTHDAY","DAILY",this.dtstart.day),this.last.month=this.setup_defaults("BYMONTH","MONTHLY",this.dtstart.month),this.rule.freq=="WEEKLY"&&("BYDAY"in t?(f=(c=this.ruleDayOfWeek(t.BYDAY[0],this.rule.wkst))[0],e=(s=c[1])-this.last.dayOfWeek(this.rule.wkst),(this.last.dayOfWeek(this.rule.wkst)<s&&0<=e||e<0)&&(this.last.day+=e)):(e=n.Recur.numericDayToIcalDay(this.dtstart.dayOfWeek()),t.BYDAY=[e])),this.rule.freq=="YEARLY"){for(;this.expand_year_days(this.last.year),!(0<this.days.length);)this.increment_year(this.rule.interval);this._nextByYearDay()}if(this.rule.freq=="MONTHLY"&&this.has_by_data("BYDAY")){var r,i=null,h=this.last.clone(),a=n.Time.daysInMonth(this.last.month,this.last.year);for(r in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(r)){this.last=h.clone();var c,f=(c=this.ruleDayOfWeek(this.by_data.BYDAY[r]))[0],s=c[1],l=this.last.nthWeekDay(s,f);if(6<=f||f<=-6)throw new Error("Malformed values in BYDAY part");if(a<l||l<=0){if(i&&i.month==h.month)continue;for(;a<l||l<=0;)this.increment_month(),a=n.Time.daysInMonth(this.last.month,this.last.year),l=this.last.nthWeekDay(s,f)}this.last.day=l,(!i||this.last.compare(i)<0)&&(i=this.last.clone())}if(this.last=i.clone(),this.has_by_data("BYMONTHDAY")&&this._byDayAndMonthDay(!0),this.last.day>a||this.last.day==0)throw new Error("Malformed values in BYDAY part")}else this.has_by_data("BYMONTHDAY")&&this.last.day<0&&(a=n.Time.daysInMonth(this.last.month,this.last.year),this.last.day=a+this.last.day+1)},next:function(){var e,t=this.last?this.last.clone():null;if(this.rule.count&&this.occurrence_number>=this.rule.count||this.rule.until&&0<this.last.compare(this.rule.until))return this.completed=!0,null;if(this.occurrence_number==0&&0<=this.last.compare(this.dtstart))return this.occurrence_number++,this.last;do switch(e=1,this.rule.freq){case"SECONDLY":this.next_second();break;case"MINUTELY":this.next_minute();break;case"HOURLY":this.next_hour();break;case"DAILY":this.next_day();break;case"WEEKLY":this.next_week();break;case"MONTHLY":e=this.next_month();break;case"YEARLY":this.next_year();break;default:return null}while(!this.check_contracting_rules()||this.last.compare(this.dtstart)<0||!e);if(this.last.compare(t)==0)throw new Error("Same occurrence found twice, protecting you from death by recursion");return this.rule.until&&0<this.last.compare(this.rule.until)?(this.completed=!0,null):(this.occurrence_number++,this.last)},next_second:function(){return this.next_generic("BYSECOND","SECONDLY","second","minute")},increment_second:function(e){return this.increment_generic(e,"second",60,"minute")},next_minute:function(){return this.next_generic("BYMINUTE","MINUTELY","minute","hour","next_second")},increment_minute:function(e){return this.increment_generic(e,"minute",60,"hour")},next_hour:function(){return this.next_generic("BYHOUR","HOURLY","hour","monthday","next_minute")},increment_hour:function(e){this.increment_generic(e,"hour",24,"monthday")},next_day:function(){0 in this.by_data;var e=this.rule.freq=="DAILY";return this.next_hour()==0||(e?this.increment_monthday(this.rule.interval):this.increment_monthday(1)),0},next_week:function(){var e,t=0;return this.next_weekday_by_week()==0||(this.has_by_data("BYWEEKNO")?(++this.by_indices.BYWEEKNO,this.by_indices.BYWEEKNO==this.by_data.BYWEEKNO.length&&(this.by_indices.BYWEEKNO=0,t=1),this.last.month=1,this.last.day=1,e=this.by_data.BYWEEKNO[this.by_indices.BYWEEKNO],this.last.day+=7*e,t&&this.increment_year(1)):this.increment_monthday(7*this.rule.interval)),t},normalizeByMonthDayRules:function(e,t,r){for(var i,h=n.Time.daysInMonth(t,e),a=[],c=0,f=r.length;c<f;c++)if(i=r[c],!(Math.abs(i)>h)){if(i<0)i=h+(i+1);else if(i===0)continue;a.indexOf(i)===-1&&a.push(i)}return a.sort(function(s,l){return s-l})},_byDayAndMonthDay:function(e){var t,r,i,h,a=this.by_data.BYDAY,c=0,f=a.length,s=0,l=this,p=this.last.day;function m(){for(h=n.Time.daysInMonth(l.last.month,l.last.year),t=l.normalizeByMonthDayRules(l.last.year,l.last.month,l.by_data.BYMONTHDAY),i=t.length;t[c]<=p&&(!e||t[c]!=p)&&c<i-1;)c++}function T(){p=0,l.increment_month(),c=0,m()}m(),e&&--p;for(var _=48;!s&&_;)if(_--,h<(r=p+1))T();else{var D=t[c++];if(r<=D){for(var p=D,b=0;b<f;b++){var O=this.ruleDayOfWeek(a[b]),v=O[0],O=O[1];if(this.last.day=p,this.last.isNthWeekDay(O,v)){s=1;break}}s||c!==i||T()}else T()}if(_<=0)throw new Error("Malformed values in BYDAY combined with BYMONTHDAY parts");return s},next_month:function(){this.rule.freq;var e=1;if(this.next_hour()==0)return e;if(this.has_by_data("BYDAY")&&this.has_by_data("BYMONTHDAY"))e=this._byDayAndMonthDay();else if(this.has_by_data("BYDAY")){var t=n.Time.daysInMonth(this.last.month,this.last.year),r=0,i=0;if(this.has_by_data("BYSETPOS")){for(var h=this.last.day,a=1;a<=t;a++)this.last.day=a,this.is_day_in_byday(this.last)&&(i++,a<=h&&r++);this.last.day=h}for(var e=0,a=this.last.day+1;a<=t;a++)if(this.last.day=a,this.is_day_in_byday(this.last)&&(!this.has_by_data("BYSETPOS")||this.check_set_position(++r)||this.check_set_position(r-i-1))){e=1;break}t<a&&(this.last.day=1,this.increment_month(),this.is_day_in_byday(this.last)?this.has_by_data("BYSETPOS")&&!this.check_set_position(1)||(e=1):e=0)}else this.has_by_data("BYMONTHDAY")?(this.by_indices.BYMONTHDAY++,this.by_indices.BYMONTHDAY>=this.by_data.BYMONTHDAY.length&&(this.by_indices.BYMONTHDAY=0,this.increment_month()),(t=n.Time.daysInMonth(this.last.month,this.last.year))<(a=(a=this.by_data.BYMONTHDAY[this.by_indices.BYMONTHDAY])<0?t+a+1:a)?(this.last.day=1,e=this.is_day_in_byday(this.last)):this.last.day=a):(this.increment_month(),t=n.Time.daysInMonth(this.last.month,this.last.year),this.by_data.BYMONTHDAY[0]>t?e=0:this.last.day=this.by_data.BYMONTHDAY[0]);return e},next_weekday_by_week:function(){var e=0;if(this.next_hour()==0)return e;if(!this.has_by_data("BYDAY"))return 1;for(;;){var t=new n.Time;this.by_indices.BYDAY++,this.by_indices.BYDAY==Object.keys(this.by_data.BYDAY).length&&(this.by_indices.BYDAY=0,e=1);var r=this.by_data.BYDAY[this.by_indices.BYDAY],r=this.ruleDayOfWeek(r)[1];if((r-=this.rule.wkst)<0&&(r+=7),t.year=this.last.year,t.month=this.last.month,t.day=this.last.day,t=t.startDoyWeek(this.rule.wkst),!(r+t<1)||e)return r=n.Time.fromDayOfYear(t+r,this.last.year),this.last.year=r.year,this.last.month=r.month,this.last.day=r.day,e}},next_year:function(){if(this.next_hour()==0)return 0;if(++this.days_index==this.days.length)for(this.days_index=0;this.increment_year(this.rule.interval),this.expand_year_days(this.last.year),this.days.length==0;);return this._nextByYearDay(),1},_nextByYearDay:function(){var e=this.days[this.days_index],t=this.last.year;e<1&&(e+=1,t+=1),t=n.Time.fromDayOfYear(e,t),this.last.day=t.day,this.last.month=t.month},ruleDayOfWeek:function(e,t){var r=e.match(/([+-]?[0-9])?(MO|TU|WE|TH|FR|SA|SU)/);return r?[parseInt(r[1]||0,10),e=n.Recur.icalDayToNumericDay(r[2],t)]:[0,0]},next_generic:function(e,f,r,i,h){var a=e in this.by_data,c=this.rule.freq==f,f=0;return h&&this[h]()==0||(a?(this.by_indices[e]++,this.by_indices[e],h=this.by_data[e],this.by_indices[e]==h.length&&(this.by_indices[e]=0,f=1),this.last[r]=h[this.by_indices[e]]):c&&this["increment_"+r](this.rule.interval),a&&f&&c&&this["increment_"+i](1)),f},increment_monthday:function(e){for(var t=0;t<e;t++){var r=n.Time.daysInMonth(this.last.month,this.last.year);this.last.day++,this.last.day>r&&(this.last.day-=r,this.increment_month())}},increment_month:function(){var e;this.last.day=1,this.has_by_data("BYMONTH")?(this.by_indices.BYMONTH++,this.by_indices.BYMONTH==this.by_data.BYMONTH.length&&(this.by_indices.BYMONTH=0,this.increment_year(1)),this.last.month=this.by_data.BYMONTH[this.by_indices.BYMONTH]):(this.rule.freq=="MONTHLY"?this.last.month+=this.rule.interval:this.last.month++,this.last.month--,e=n.helpers.trunc(this.last.month/12),this.last.month%=12,this.last.month++,e!=0&&this.increment_year(e))},increment_year:function(e){this.last.year+=e},increment_generic:function(e,t,r,i){this.last[t]+=e,e=n.helpers.trunc(this.last[t]/r),this.last[t]%=r,e!=0&&this["increment_"+i](e)},has_by_data:function(e){return e in this.rule.parts},expand_year_days:function(e){var t=new n.Time;this.days=[];var r,i,h={},a=["BYDAY","BYWEEKNO","BYMONTHDAY","BYMONTH","BYYEARDAY"];for(r in a)!a.hasOwnProperty(r)||(i=a[r])in this.rule.parts&&(h[i]=this.rule.parts[i]);if("BYMONTH"in h&&"BYWEEKNO"in h){var c=1,f={};t.year=e,t.isDate=!0;for(var s=0;s<this.by_data.BYMONTH.length;s++){var l=this.by_data.BYMONTH[s];t.month=l,t.day=1;var p=t.weekNumber(this.rule.wkst);t.day=n.Time.daysInMonth(l,e);for(var m=t.weekNumber(this.rule.wkst),s=p;s<m;s++)f[s]=1}for(var T=0;T<this.by_data.BYWEEKNO.length&&c;T++)(u=this.by_data.BYWEEKNO[T])<52?c&=f[T]:c=0;c?delete h.BYMONTH:delete h.BYWEEKNO}var _,D,b,v,O,u,y=Object.keys(h).length;if(y==0){var g=this.dtstart.clone();g.year=this.last.year,this.days.push(g.dayOfYear())}else if(y==1&&"BYMONTH"in h)for(var A in this.by_data.BYMONTH)this.by_data.BYMONTH.hasOwnProperty(A)&&((_=this.dtstart.clone()).year=e,_.month=this.by_data.BYMONTH[A],_.isDate=!0,this.days.push(_.dayOfYear()));else if(y==1&&"BYMONTHDAY"in h)for(var S in this.by_data.BYMONTHDAY)this.by_data.BYMONTHDAY.hasOwnProperty(S)&&(D=this.dtstart.clone(),(Y=this.by_data.BYMONTHDAY[S])<0&&(Y=Y+(C=n.Time.daysInMonth(D.month,e))+1),D.day=Y,D.year=e,D.isDate=!0,this.days.push(D.dayOfYear()));else if(y==2&&"BYMONTHDAY"in h&&"BYMONTH"in h){for(var A in this.by_data.BYMONTH)if(this.by_data.BYMONTH.hasOwnProperty(A)){var Y,E=this.by_data.BYMONTH[A],C=n.Time.daysInMonth(E,e);for(S in this.by_data.BYMONTHDAY)this.by_data.BYMONTHDAY.hasOwnProperty(S)&&((Y=this.by_data.BYMONTHDAY[S])<0&&(Y=Y+C+1),t.day=Y,t.month=E,t.year=e,t.isDate=!0,this.days.push(t.dayOfYear()))}}else if(!(y==1&&"BYWEEKNO"in h||y==2&&"BYWEEKNO"in h&&"BYMONTHDAY"in h))if(y==1&&"BYDAY"in h)this.days=this.days.concat(this.expand_by_day(e));else if(y==2&&"BYDAY"in h&&"BYMONTH"in h){for(var A in this.by_data.BYMONTH)if(this.by_data.BYMONTH.hasOwnProperty(A)){l=this.by_data.BYMONTH[A],C=n.Time.daysInMonth(l,e),t.year=e,t.month=this.by_data.BYMONTH[A],t.day=1,t.isDate=!0;var I=t.dayOfWeek(),F=t.dayOfYear()-1;t.day=C;var X=t.dayOfWeek();if(this.has_by_data("BYSETPOS")){for(var K=[],w=1;w<=C;w++)t.day=w,this.is_day_in_byday(t)&&K.push(w);for(var U=0;U<K.length;U++)(this.check_set_position(U+1)||this.check_set_position(U-K.length))&&this.days.push(F+K[U])}else for(var z in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(z)){var k,B=this.by_data.BYDAY[z],L=this.ruleDayOfWeek(B),z=L[0],B=L[1],L=(B+7-I)%7+1,B=C-(X+7-B)%7;if(z==0)for(var w=L;w<=C;w+=7)this.days.push(F+w);else 0<z?(k=L+7*(z-1))<=C&&this.days.push(F+k):0<(k=B+7*(z+1))&&this.days.push(F+k)}}this.days.sort(function(Q,$){return Q-$})}else if(y==2&&"BYDAY"in h&&"BYMONTHDAY"in h)for(v in b=this.expand_by_day(e))b.hasOwnProperty(v)&&(w=b[v],O=n.Time.fromDayOfYear(w,e),0<=this.by_data.BYMONTHDAY.indexOf(O.day)&&this.days.push(w));else if(y==3&&"BYDAY"in h&&"BYMONTHDAY"in h&&"BYMONTH"in h)for(v in b=this.expand_by_day(e))b.hasOwnProperty(v)&&(w=b[v],O=n.Time.fromDayOfYear(w,e),0<=this.by_data.BYMONTH.indexOf(O.month)&&0<=this.by_data.BYMONTHDAY.indexOf(O.day)&&this.days.push(w));else if(y==2&&"BYDAY"in h&&"BYWEEKNO"in h)for(v in b=this.expand_by_day(e))b.hasOwnProperty(v)&&(w=b[v],u=(O=n.Time.fromDayOfYear(w,e)).weekNumber(this.rule.wkst),this.by_data.BYWEEKNO.indexOf(u)&&this.days.push(w));else y==3&&"BYDAY"in h&&"BYWEEKNO"in h&&"BYMONTHDAY"in h||(y==1&&"BYYEARDAY"in h?this.days=this.days.concat(this.by_data.BYYEARDAY):this.days=[]);return 0},expand_by_day:function(e){var t=[],r=this.last.clone();r.year=e,r.month=1,r.day=1,r.isDate=!0;var i=r.dayOfWeek();r.month=12,r.day=31,r.isDate=!0;var h,a=r.dayOfWeek(),c=r.dayOfYear();for(h in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(h)){var f=this.by_data.BYDAY[h],s=this.ruleDayOfWeek(f),f=s[0],s=s[1];if(f==0)for(var l=(s+7-i)%7+1;l<=c;l+=7)t.push(l);else 0<f?t.push((i<=s?s-i+1:s-i+8)+7*(f-1)):t.push((s<=a?c-a+s:c-a+s-7)-7*((f=-f)-1))}return t},is_day_in_byday:function(e){for(var t in this.by_data.BYDAY)if(this.by_data.BYDAY.hasOwnProperty(t)){var r=this.by_data.BYDAY[t],i=this.ruleDayOfWeek(r),t=i[0],r=i[1],i=e.dayOfWeek();if(t==0&&r==i||e.nthWeekDay(r,t)==e.day)return 1}return 0},check_set_position:function(e){return!!this.has_by_data("BYSETPOS")&&this.by_data.BYSETPOS.indexOf(e)!==-1},sort_byday_rules:function(e){for(var t=0;t<e.length;t++)for(var r=0;r<t;r++){var i=this.ruleDayOfWeek(e[r],this.rule.wkst)[1];this.ruleDayOfWeek(e[t],this.rule.wkst)[1]<i&&(i=e[t],e[t]=e[r],e[r]=i)}},check_contract_restriction:function(e,t){var r=o._indexMap[e],r=o._expandMap[this.rule.freq][r],i=!1;if(e in this.by_data&&r==o.CONTRACT){var h,a=this.by_data[e];for(h in a)if(a.hasOwnProperty(h)&&a[h]==t){i=!0;break}}else i=!0;return i},check_contracting_rules:function(){var e=this.last.dayOfWeek(),t=this.last.weekNumber(this.rule.wkst),r=this.last.dayOfYear();return this.check_contract_restriction("BYSECOND",this.last.second)&&this.check_contract_restriction("BYMINUTE",this.last.minute)&&this.check_contract_restriction("BYHOUR",this.last.hour)&&this.check_contract_restriction("BYDAY",n.Recur.numericDayToIcalDay(e))&&this.check_contract_restriction("BYWEEKNO",t)&&this.check_contract_restriction("BYMONTHDAY",this.last.day)&&this.check_contract_restriction("BYMONTH",this.last.month)&&this.check_contract_restriction("BYYEARDAY",r)},setup_defaults:function(e,t,r){var i=o._indexMap[e];return o._expandMap[this.rule.freq][i]!=o.CONTRACT&&(e in this.by_data||(this.by_data[e]=[r]),this.rule.freq!=t)?this.by_data[e][0]:r},toJSON:function(){var e=Object.create(null);return e.initialized=this.initialized,e.rule=this.rule.toJSON(),e.dtstart=this.dtstart.toJSON(),e.by_data=this.by_data,e.days=this.days,e.last=this.last.toJSON(),e.by_indices=this.by_indices,e.occurrence_number=this.occurrence_number,e}},o._indexMap={BYSECOND:0,BYMINUTE:1,BYHOUR:2,BYDAY:3,BYMONTHDAY:4,BYYEARDAY:5,BYWEEKNO:6,BYMONTH:7,BYSETPOS:8},o._expandMap={SECONDLY:[1,1,1,1,1,1,1,1],MINUTELY:[2,1,1,1,1,1,1,1],HOURLY:[2,2,1,1,1,1,1,1],DAILY:[2,2,2,1,1,1,1,1],WEEKLY:[2,2,2,2,3,3,1,1],MONTHLY:[2,2,2,2,2,3,3,1],YEARLY:[2,2,2,2,2,2,2,2]},o.UNKNOWN=0,o.CONTRACT=1,o.EXPAND=2,o.ILLEGAL=3,o}(),n.RecurExpansion=function(){function o(r){return n.helpers.formatClassType(r,n.Time)}function e(r,i){return r.compare(i)}function t(r){this.ruleDates=[],this.exDates=[],this.fromData(r)}return t.prototype={complete:!1,ruleIterators:null,ruleDates:null,exDates:null,ruleDateInc:0,exDateInc:0,exDate:null,ruleDate:null,dtstart:null,last:null,fromData:function(r){var i=n.helpers.formatClassType(r.dtstart,n.Time);if(!i)throw new Error(".dtstart (ICAL.Time) must be given");if(this.dtstart=i,r.component)this._init(r.component);else{if(this.last=o(r.last)||i.clone(),!r.ruleIterators)throw new Error(".ruleIterators or .component must be given");this.ruleIterators=r.ruleIterators.map(function(h){return n.helpers.formatClassType(h,n.RecurIterator)}),this.ruleDateInc=r.ruleDateInc,this.exDateInc=r.exDateInc,r.ruleDates&&(this.ruleDates=r.ruleDates.map(o),this.ruleDate=this.ruleDates[this.ruleDateInc]),r.exDates&&(this.exDates=r.exDates.map(o),this.exDate=this.exDates[this.exDateInc]),r.complete!==void 0&&(this.complete=r.complete)}},next:function(){for(var r,i,h=0;;){if(500<h++)throw new Error("max tries have occured, rule may be impossible to forfill.");if(i=this.ruleDate,r=this._nextRecurrenceIter(this.last),!i&&!r){this.complete=!0;break}if((!i||r&&0<i.compare(r.last))&&(i=r.last.clone(),r.next()),this.ruleDate===i&&this._nextRuleDay(),this.last=i,!this.exDate||((i=this.exDate.compare(this.last))<0&&this._nextExDay(),i!==0))return this.last;this._nextExDay()}},toJSON:function(){function r(h){return h.toJSON()}var i=Object.create(null);return i.ruleIterators=this.ruleIterators.map(r),this.ruleDates&&(i.ruleDates=this.ruleDates.map(r)),this.exDates&&(i.exDates=this.exDates.map(r)),i.ruleDateInc=this.ruleDateInc,i.exDateInc=this.exDateInc,i.last=this.last.toJSON(),i.dtstart=this.dtstart.toJSON(),i.complete=this.complete,i},_extractDates:function(r,i){function h(p){a=n.helpers.binsearchInsert(c,p,e),c.splice(a,0,p)}for(var a,c=[],f=r.getAllProperties(i),s=f.length,l=0;l<s;l++)f[l].getValues().forEach(h);return c},_init:function(r){if(this.ruleIterators=[],this.last=this.dtstart.clone(),!((i=r).hasProperty("rdate")||i.hasProperty("rrule")||i.hasProperty("recurrence-id")))return this.ruleDate=this.last.clone(),void(this.complete=!0);var i;if(r.hasProperty("rdate")&&(this.ruleDates=this._extractDates(r,"rdate"),this.ruleDates[0]&&this.ruleDates[0].compare(this.dtstart)<0?(this.ruleDateInc=0,this.last=this.ruleDates[0].clone()):this.ruleDateInc=n.helpers.binsearchInsert(this.ruleDates,this.last,e),this.ruleDate=this.ruleDates[this.ruleDateInc]),r.hasProperty("rrule"))for(var h,a=r.getAllProperties("rrule"),c=0,f=a.length;c<f;c++)h=a[c].getFirstValue().iterator(this.dtstart),this.ruleIterators.push(h),h.next();r.hasProperty("exdate")&&(this.exDates=this._extractDates(r,"exdate"),this.exDateInc=n.helpers.binsearchInsert(this.exDates,this.last,e),this.exDate=this.exDates[this.exDateInc])},_nextExDay:function(){this.exDate=this.exDates[++this.exDateInc]},_nextRuleDay:function(){this.ruleDate=this.ruleDates[++this.ruleDateInc]},_nextRecurrenceIter:function(){var r=this.ruleIterators;if(r.length===0)return null;for(var i,h,a,c=r.length,f=0;f<c;f++)h=(i=r[f]).last,i.completed?(c--,f!==0&&f--,r.splice(f,1)):(!a||0<a.last.compare(h))&&(a=i);return a}},t}(),n.Event=function(){function o(t,r){t instanceof n.Component||(r=t,t=null),this.component=t||new n.Component("vevent"),this._rangeExceptionCache=Object.create(null),this.exceptions=Object.create(null),this.rangeExceptions=[],r&&r.strictExceptions&&(this.strictExceptions=r.strictExceptions),r&&r.exceptions?r.exceptions.forEach(this.relateException,this):this.component.parent&&!this.isRecurrenceException()&&this.component.parent.getAllSubcomponents("vevent").forEach(function(i){i.hasProperty("recurrence-id")&&this.relateException(i)},this)}function e(t,r){return t[0]>r[0]?1:r[0]>t[0]?-1:0}return o.prototype={THISANDFUTURE:"THISANDFUTURE",exceptions:null,strictExceptions:!1,relateException:function(t){if(this.isRecurrenceException())throw new Error("cannot relate exception to exceptions");if(t instanceof n.Component&&(t=new n.Event(t)),this.strictExceptions&&t.uid!==this.uid)throw new Error("attempted to relate unrelated exception");var r=t.recurrenceId.toString();(this.exceptions[r]=t).modifiesFuture()&&(t=[t.recurrenceId.toUnixTime(),r],r=n.helpers.binsearchInsert(this.rangeExceptions,t,e),this.rangeExceptions.splice(r,0,t))},modifiesFuture:function(){return!!this.component.hasProperty("recurrence-id")&&this.component.getFirstProperty("recurrence-id").getParameter("range")===this.THISANDFUTURE},findRangeException:function(i){if(!this.rangeExceptions.length)return null;var r=i.toUnixTime(),i=n.helpers.binsearchInsert(this.rangeExceptions,[r],e);return--i<0?null:(i=this.rangeExceptions[i],r<i[0]?null:i[1])},getOccurrenceDetails:function(t){var r,i,h,a=t.toString(),c=t.convertToZone(n.Timezone.utcTimezone).toString(),f={recurrenceId:t};return a in this.exceptions?(i=f.item=this.exceptions[a],f.startDate=i.startDate,f.endDate=i.endDate,f.item=i):c in this.exceptions?(i=this.exceptions[c],f.startDate=i.startDate,f.endDate=i.endDate,f.item=i):(h=this.findRangeException(t))?(a=this.exceptions[h],f.item=a,(r=this._rangeExceptionCache[h])||(c=a.recurrenceId.clone(),i=a.startDate.clone(),c.zone=i.zone,r=i.subtractDate(c),this._rangeExceptionCache[h]=r),(h=t.clone()).zone=a.startDate.zone,h.addDuration(r),(r=h.clone()).addDuration(a.duration),f.startDate=h,f.endDate=r):((r=t.clone()).addDuration(this.duration),f.endDate=r,f.startDate=t,f.item=this),f},iterator:function(t){return new n.RecurExpansion({component:this.component,dtstart:t||this.startDate})},isRecurring:function(){var t=this.component;return t.hasProperty("rrule")||t.hasProperty("rdate")},isRecurrenceException:function(){return this.component.hasProperty("recurrence-id")},getRecurrenceTypes:function(){for(var t=this.component.getAllProperties("rrule"),r=0,i=t.length,h=Object.create(null);r<i;r++)h[t[r].getFirstValue().freq]=!0;return h},get uid(){return this._firstProp("uid")},set uid(t){this._setProp("uid",t)},get startDate(){return this._firstProp("dtstart")},set startDate(t){this._setTime("dtstart",t)},get endDate(){var t,r=this._firstProp("dtend");return r||(t=this._firstProp("duration"),r=this.startDate.clone(),t?r.addDuration(t):r.isDate&&(r.day+=1)),r},set endDate(t){this.component.hasProperty("duration")&&this.component.removeProperty("duration"),this._setTime("dtend",t)},get duration(){var t=this._firstProp("duration");return t||this.endDate.subtractDateTz(this.startDate)},set duration(t){this.component.hasProperty("dtend")&&this.component.removeProperty("dtend"),this._setProp("duration",t)},get location(){return this._firstProp("location")},set location(t){return this._setProp("location",t)},get attendees(){return this.component.getAllProperties("attendee")},get summary(){return this._firstProp("summary")},set summary(t){this._setProp("summary",t)},get description(){return this._firstProp("description")},set description(t){this._setProp("description",t)},get color(){return this._firstProp("color")},set color(t){this._setProp("color",t)},get organizer(){return this._firstProp("organizer")},set organizer(t){this._setProp("organizer",t)},get sequence(){return this._firstProp("sequence")},set sequence(t){this._setProp("sequence",t)},get recurrenceId(){return this._firstProp("recurrence-id")},set recurrenceId(t){this._setTime("recurrence-id",t)},_setTime:function(t,r){var i=this.component.getFirstProperty(t);i||(i=new n.Property(t),this.component.addProperty(i)),r.zone===n.Timezone.localTimezone||r.zone===n.Timezone.utcTimezone?i.removeParameter("tzid"):i.setParameter("tzid",r.zone.tzid),i.setValue(r)},_setProp:function(t,r){this.component.updatePropertyWithValue(t,r)},_firstProp:function(t){return this.component.getFirstPropertyValue(t)},toString:function(){return this.component.toString()}},o}(),n.ComponentParser=function(){function o(e){for(var t in e=e===void 0?{}:e)e.hasOwnProperty(t)&&(this[t]=e[t])}return o.prototype={parseEvent:!0,parseTimezone:!0,oncomplete:function(){},onerror:function(e){},ontimezone:function(e){},onevent:function(e){},process:function(e){for(var t,r,i=(e=(e=typeof e=="string"?n.parse(e):e)instanceof n.Component?e:new n.Component(e)).getAllSubcomponents(),h=0,a=i.length;h<a;h++)switch((t=i[h]).name){case"vtimezone":!this.parseTimezone||(r=t.getFirstPropertyValue("tzid"))&&this.ontimezone(new n.Timezone({tzid:r,component:t}));break;case"vevent":this.parseEvent&&this.onevent(new n.Event(t));break;default:continue}this.oncomplete()}},o}()})(fe);var Ue=fe.exports;const re=Pe(Ue);"stream"in Blob.prototype||Object.defineProperty(Blob.prototype,"stream",{value(){return new Response(this).body}}),"setBigUint64"in DataView.prototype||Object.defineProperty(DataView.prototype,"setBigUint64",{value(d,n,o){const e=Number(0xffffffffn&n),t=Number(n>>32n);this.setUint32(d+(o?0:4),e,o),this.setUint32(d+(o?4:0),t,o)}});var q=d=>new DataView(new ArrayBuffer(d)),M=d=>new Uint8Array(d.buffer||d),J=d=>new TextEncoder().encode(String(d)),W=d=>Math.min(4294967295,Number(d)),he=d=>Math.min(65535,Number(d));function Le(d,n){if(n===void 0||n instanceof Date||(n=new Date(n)),d instanceof File)return{isFile:1,t:n||new Date(d.lastModified),i:d.stream()};if(d instanceof Response)return{isFile:1,t:n||new Date(d.headers.get("Last-Modified")||Date.now()),i:d.body};if(n===void 0)n=new Date;else if(isNaN(n))throw new Error("Invalid modification date.");if(d===void 0)return{isFile:0,t:n};if(typeof d=="string")return{isFile:1,t:n,i:J(d)};if(d instanceof Blob)return{isFile:1,t:n,i:d.stream()};if(d instanceof Uint8Array||d instanceof ReadableStream)return{isFile:1,t:n,i:d};if(d instanceof ArrayBuffer||ArrayBuffer.isView(d))return{isFile:1,t:n,i:M(d)};if(Symbol.asyncIterator in d)return{isFile:1,t:n,i:me(d[Symbol.asyncIterator]())};throw new TypeError("Unsupported input format.")}function me(d,n=d){return new ReadableStream({async pull(o){let e=0;for(;o.desiredSize>e;){const t=await d.next();if(!t.value){o.close();break}{const r=Me(t.value);o.enqueue(r),e+=r.byteLength}}},cancel(o){var e;(e=n.throw)==null||e.call(n,o)}})}function Me(d){return typeof d=="string"?J(d):d instanceof Uint8Array?d:M(d)}function pe(d,n,o){let[e,t]=function(r){return r?r instanceof Uint8Array?[r,1]:ArrayBuffer.isView(r)||r instanceof ArrayBuffer?[M(r),1]:[J(r),0]:[void 0,0]}(n);if(d instanceof File)return{o:ie(e||J(d.name)),u:BigInt(d.size),l:t};if(d instanceof Response){const r=d.headers.get("content-disposition"),i=r&&r.match(/;\s*filename\*?=["']?(.*?)["']?$/i),h=i&&i[1]||d.url&&new URL(d.url).pathname.split("/").findLast(Boolean),a=h&&decodeURIComponent(h),c=o||+d.headers.get("content-length");return{o:ie(e||J(a)),u:BigInt(c),l:t}}return e=ie(e,d!==void 0||o!==void 0),typeof d=="string"?{o:e,u:BigInt(J(d).length),l:t}:d instanceof Blob?{o:e,u:BigInt(d.size),l:t}:d instanceof ArrayBuffer||ArrayBuffer.isView(d)?{o:e,u:BigInt(d.byteLength),l:t}:{o:e,u:ke(d,o),l:t}}function ke(d,n){return n>-1?BigInt(n):d?void 0:0n}function ie(d,n=1){if(!d||d.every(o=>o===47))throw new Error("The file must have a name.");if(n)for(;d[d.length-1]===47;)d=d.subarray(0,-1);else d[d.length-1]!==47&&(d=new Uint8Array([...d,47]));return d}var ye=new Uint32Array(256);for(let d=0;d<256;++d){let n=d;for(let o=0;o<8;++o)n=n>>>1^(1&n&&3988292384);ye[d]=n}function ce(d,n=0){n^=-1;for(var o=0,e=d.length;o<e;o++)n=n>>>8^ye[255&n^d[o]];return(-1^n)>>>0}function Te(d,n,o=0){const e=d.getSeconds()>>1|d.getMinutes()<<5|d.getHours()<<11,t=d.getDate()|d.getMonth()+1<<5|d.getFullYear()-1980<<9;n.setUint16(o,e,1),n.setUint16(o+2,t,1)}function Ve({o:d,l:n},o){return 8*(!n||(o??function(e){try{Re.decode(e)}catch{return 0}return 1}(d)))}var Re=new TextDecoder("utf8",{fatal:1});function He(d,n=0){const o=q(30);return o.setUint32(0,1347093252),o.setUint32(4,754976768|n),Te(d.t,o,10),o.setUint16(26,d.o.length,1),M(o)}async function*je(d){let{i:n}=d;if("then"in n&&(n=await n),n instanceof Uint8Array)yield n,d.m=ce(n,0),d.u=BigInt(n.length);else{d.u=0n;const o=n.getReader();for(;;){const{value:e,done:t}=await o.read();if(t)break;d.m=ce(e,d.m),d.u+=BigInt(e.length),yield e}}}function We(d,n){const o=q(16+(n?8:0));return o.setUint32(0,1347094280),o.setUint32(4,d.isFile?d.m:0,1),n?(o.setBigUint64(8,d.u,1),o.setBigUint64(16,d.u,1)):(o.setUint32(8,W(d.u),1),o.setUint32(12,W(d.u),1)),M(o)}function Fe(d,n,o=0,e=0){const t=q(46);return t.setUint32(0,1347092738),t.setUint32(4,755182848),t.setUint16(8,2048|o),Te(d.t,t,12),t.setUint32(16,d.isFile?d.m:0,1),t.setUint32(20,W(d.u),1),t.setUint32(24,W(d.u),1),t.setUint16(28,d.o.length,1),t.setUint16(30,e,1),t.setUint16(40,d.isFile?33204:16893,1),t.setUint32(42,W(n),1),M(t)}function Ke(d,n,o){const e=q(o);return e.setUint16(0,1,1),e.setUint16(2,o-4,1),16&o&&(e.setBigUint64(4,d.u,1),e.setBigUint64(12,d.u,1)),e.setBigUint64(o-8,n,1),M(e)}function _e(d){return d instanceof File||d instanceof Response?[[d],[d]]:[[d.input,d.name,d.size],[d.input,d.lastModified]]}var Je=d=>function(n){let o=BigInt(22),e=0n,t=0;for(const r of n){if(!r.o)throw new Error("Every file must have a non-empty name.");if(r.u===void 0)throw new Error(`Missing size for file "${new TextDecoder().decode(r.o)}".`);const i=r.u>=0xffffffffn,h=e>=0xffffffffn;e+=BigInt(46+r.o.length+(i&&8))+r.u,o+=BigInt(r.o.length+46+(12*h|28*i)),t||(t=i)}return(t||e>=0xffffffffn)&&(o+=BigInt(76)),o+e}(function*(n){for(const o of n)yield pe(..._e(o)[0])}(d));function qe(d,n={}){const o={"Content-Type":"application/zip","Content-Disposition":"attachment"};return(typeof n.length=="bigint"||Number.isInteger(n.length))&&n.length>0&&(o["Content-Length"]=String(n.length)),n.metadata&&(o["Content-Length"]=String(Je(n.metadata))),new Response(Ze(d,n),{headers:o})}function Ze(d,n={}){const o=function(e){var r;const t=e[Symbol.iterator in e?Symbol.iterator:Symbol.asyncIterator]();return{async next(){const i=await t.next();if(i.done)return i;const[h,a]=_e(i.value);return{done:0,value:Object.assign(Le(...a),pe(...h))}},throw:(r=t.throw)==null?void 0:r.bind(t),[Symbol.asyncIterator](){return this}}}(d);return me(async function*(e,t){const r=[];let i=0n,h=0n,a=0;for await(const s of e){const l=Ve(s,t.buffersAreUTF8);yield He(s,l),yield s.o,s.isFile&&(yield*je(s));const p=s.u>=0xffffffffn,m=12*(i>=0xffffffffn)|28*p;yield We(s,p),r.push(Fe(s,i,l,m)),r.push(s.o),m&&r.push(Ke(s,i,m)),p&&(i+=8n),h++,i+=BigInt(46+s.o.length)+s.u,a||(a=p)}let c=0n;for(const s of r)yield s,c+=BigInt(s.length);if(a||i>=0xffffffffn){const s=q(76);s.setUint32(0,1347094022),s.setBigUint64(4,BigInt(44),1),s.setUint32(12,755182848),s.setBigUint64(24,h,1),s.setBigUint64(32,h,1),s.setBigUint64(40,c,1),s.setBigUint64(48,i,1),s.setUint32(56,1347094023),s.setBigUint64(64,i+c,1),s.setUint32(72,1,1),yield M(s)}const f=q(22);f.setUint32(0,1347093766),f.setUint16(8,he(h),1),f.setUint16(10,he(h),1),f.setUint32(12,W(c),1),f.setUint32(16,W(i),1),yield M(f)}(o,n),o)}function Ge(d){let n=d.summary.substring(d.summary.indexOf("-")+1);const o=n.replaceAll(" ",""),e=n.substring(n.lastIndexOf("(")+1<0?0:n.lastIndexOf("(")+1,n.lastIndexOf(")")<0?n.length:n.indexOf(")")),t=de[d.startDate.toString().substring(5,7)],r=le[d.startDate.toString().substring(5,7)];let i=de[d.endDate.toString().substring(5,7)],h=le[d.endDate.toString().substring(5,7)];t===i&&(i="");const a=d.startDate.toString().substring(8,10),c=d.endDate.toString().substring(8,10),f=d.startDate.toString().substring(0,4),s=d.location,l=d.contact,p=d.description;return{id:o,eventShortName:e,monthStartShort:t,monthStartLong:r,monthEndShort:i,monthEndLong:h,dayStart:a,dayEnd:c,year:f,location:s,url:l,name:n.replace(new RegExp("(?<=[0-9]+)(st|th|nd|rd)"),m=>`\\textsuperscript{${m}}`),description:p}}const ge="%EVENT_ID%",Xe="%EVENT_SHORT%",Qe="%MONTH_SHORT_BEGIN%",$e="%MONTH_LONG_BEGIN%",De="%BEGIN_DAY%",et="%MONTH_SHORT_END%",tt="%MONTH_LONG_END%",ve="%END_DAY%",ae="%YEAR%",be="%LOCATION%",Oe="%URL%",nt="%DESCRIPTION%",rt="%EVENT_NAME%";function it(d,n){return n=n.replace(ge,d.id),n=n.replace(Xe,d.eventShortName),n=n.replace(Qe,d.monthStartShort),n=n.replace(De,d.dayStart),n=n.replace(et,d.monthEndShort),n=n.replace(ve,d.dayEnd),n=n.replace(ae,d.year),n=n.replace(be,d.location),n=n.replace(Oe,d.url),n}function at(d,n){return n=n.replace(rt,d.name),n=n.replace(nt,d.description),n=n.replace(De,d.dayStart),n=n.replace(ve,d.dayEnd),n=n.replace(ae,d.year),n=n.replace(be,d.location),n=n.replace(ae,d.year),n=n.replace($e,d.monthStartLong),n=n.replace(tt,d.monthEndLong),n=n.replace(ge,d.id),n=n.replace(Oe,d.url),n}const le={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"},de={"01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"June","07":"July","08":"Aug","09":"Sept",10:"Oct",11:"Nov",12:"Dec"},se=d=>(Ie("data-v-6ad0ae3f"),d=d(),Ce(),d),st={class:"d-flex align-center justify-center flex-column mt-5"},ot={href:"https://github.com/drossner/sigweb-upcoming-newsletter"},ut=se(()=>j("h1",null,"Export Settings",-1)),ht={key:"8",class:"d-flex flex-wrap w-100",style:{gap:"10px"}},ct=se(()=>j("input",{type:"hidden",name:"snip_name",value:"upcoming-conferences.tex"},null,-1)),lt=se(()=>j("input",{type:"hidden",name:"snip_name",value:"README.txt"},null,-1)),dt=we({__name:"index",setup(d){const n=P(te().iCalDefaultUrl),o=P(""),e=P(new Date().toISOString().substring(0,10)),t=P(""),r=P(te().defaultAuthor),i=P(te().defaultPosition),h=P(te().defaultDoi),a=P(null),c=P(null),f=P(null),s=P([]);async function l(){const O=await fetch(n.value,{mode:"cors"}).then(u=>u.text());o.value=O}async function p(){const O=re.parse(o.value),y=new re.Component(O).getAllSubcomponents("vevent");s.value.splice(0,s.value.length),y.forEach(g=>{const A=m(g);A.startDate>e.value&&s.value.push(A)}),s.value.sort((g,A)=>g.startDate<A.startDate?-1:1),await T()}function m(O){const u=new re.Event(O);return u.contact=O.getFirstPropertyValue("contact"),u.category=O.getFirstPropertyValue("categories"),u}async function T(){const O="%TABLE_BEGIN",u="%TEMPLATE:",y="%TABLE_BEGIN",g="%DETAILS_START",A="%TEMPLATE_START",S="%TEMPLATE_END";let Y=await fetch("templatex.tex").then(B=>B.text());const E=Y.indexOf(O),C=Y.indexOf(u,E),I=Y.substring(C+u.length,Y.indexOf(`
`,C));Y.indexOf(y);const F=Y.indexOf(g),X=Y.indexOf(A,F),K=Y.indexOf(S,X),w=Y.substring(X+A.length,K);let U="",z="",k="",L="";s.value.forEach(B=>{const Q=Ge(B),$=it(Q,I),oe=at(Q,w);B.category==="Conference"?(U+=`
`,U+=$,k+=`

`,k+=oe):B.category==="in-coop"&&(z+=`
`,z+=$,L+=`

`,L+=oe)}),Y=Y.replace("%TABLE_CONTENT",U),Y=Y.replace("%TABLE_COOP_CONTENT",z),Y=Y.replace("%DETAILS_CONTENT",k),Y=Y.replace("%DETAILS_COOP_CONTENT",L),Y=Y.replaceAll("%AUTHOR%",r.value),Y=Y.replaceAll("%POSITION%",i.value),Y=Y.replaceAll("%DOI%",h.value),Y=Y.replaceAll(/(%TEMPLATE_START)(.*)(%TEMPLATE_END)/gs,""),t.value=Y}function _(){navigator.clipboard.writeText(t.value),alert("Copied LaTeX!")}async function D(){const O=await v(),u=document.createElement("a");u.href=URL.createObjectURL(O),u.download="sigweb-upcoming.zip",console.log(u.href),u.click(),u.remove()}async function b(){c.value.value=encodeURIComponent(t.value),a.value.submit()}async function v(){const O=await fetch("sigweb-banner.png"),u={name:"sigweb-upcoming.tex",lastModified:new Date,input:t.value};return await qe([u,O]).blob()}return(O,u)=>{const y=V("v-icon"),g=V("v-text-field"),A=V("v-textarea"),S=V("v-btn"),Y=V("v-divider"),E=V("v-slide-y-transition"),C=V("v-card");return Z(),ue("div",st,[j("a",ot,[x(y,{color:"black",icon:"mdi-github",class:"position-sticky",size:"x-large"})]),x(C,{class:"main-container pa-6 ma-5 d-flex flex-column",style:{gap:"1em"}},{default:R(()=>[ut,x(E,{group:"","hide-on-leave":""},{default:R(()=>[x(g,{key:"1","hide-details":"","prepend-inner-icon":"mdi-web",label:"Enter the iCal file URL",modelValue:N(n),"onUpdate:modelValue":u[0]||(u[0]=I=>H(n)?n.value=I:null),clearable:""},null,8,["modelValue"]),x(A,{key:"2","hide-details":"",label:"Enter or load ical from URL",modelValue:N(o),"onUpdate:modelValue":u[1]||(u[1]=I=>H(o)?o.value=I:null)},null,8,["modelValue"]),N(n)!=null&&N(n).length>0?(Z(),ne(S,{key:"3",onClick:l},{default:R(()=>[G("Load iCAL")]),_:1})):ee("",!0),x(Y,{key:"4",class:"ma-5"}),x(g,{key:"5",modelValue:N(e),"onUpdate:modelValue":u[2]||(u[2]=I=>H(e)?e.value=I:null),type:"date",label:"Use Events from","hide-details":""},null,8,["modelValue"]),x(g,{key:"52",modelValue:N(r),"onUpdate:modelValue":u[3]||(u[3]=I=>H(r)?r.value=I:null),label:"Author","hide-details":""},null,8,["modelValue"]),x(g,{key:"53",modelValue:N(i),"onUpdate:modelValue":u[4]||(u[4]=I=>H(i)?i.value=I:null),label:"Author Position","hide-details":""},null,8,["modelValue"]),x(g,{key:"54",modelValue:N(h),"onUpdate:modelValue":u[5]||(u[5]=I=>H(h)?h.value=I:null),label:"DOI","persistent-hint":"",hint:"e.g. 10.1145/3583849.3583854"},null,8,["modelValue"]),N(e).length===10&&N(o).length>0?(Z(),ne(S,{key:"6",onClick:p,color:"primary"},{default:R(()=>[G("Do the Magic")]),_:1})):ee("",!0),N(s).length>0?(Z(),ne(A,{key:"7",modelValue:N(t),"onUpdate:modelValue":u[6]||(u[6]=I=>H(t)?t.value=I:null)},null,8,["modelValue"])):ee("",!0),N(s).length>0?(Z(),ue("div",ht,[x(S,{onClick:_},{default:R(()=>[G("Copy LaTeX")]),_:1}),x(S,{onClick:D},{default:R(()=>[G("Download ZIP")]),_:1}),x(S,{onClick:b},{default:R(()=>[G("Open In Overleaf (Code)")]),_:1})])):ee("",!0)]),_:1})]),_:1}),j("form",{ref_key:"overleafForm",ref:a,id:"ol_form",action:"https://www.overleaf.com/docs",method:"post",target:"_blank"},[j("input",{ref_key:"formInput",ref:c,id:"ol_encoded_snip",type:"hidden",name:"encoded_snip"},null,512),j("input",{ref_key:"bannerInput",ref:f,type:"hidden",name:"encoded_snip",value:"New File -> From External URL -> https://drossner.github.io/sigweb-upcoming-newsletter/sigweb-banner.png"},null,512),ct,lt],512)])}}});const mt=xe(dt,[["__scopeId","data-v-6ad0ae3f"]]);export{mt as default};
